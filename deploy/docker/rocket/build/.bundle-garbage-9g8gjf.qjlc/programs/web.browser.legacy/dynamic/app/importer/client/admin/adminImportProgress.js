function module(t,e,o){var r,n,i,a,s,c,p,u,l,m;o.link("meteor/reactive-var",{ReactiveVar:function(t){r=t}},0),o.link("meteor/kadira:flow-router",{FlowRouter:function(t){n=t}},1),o.link("meteor/templating",{Template:function(t){i=t}},2),o.link("toastr",{default:function(t){a=t}},3),o.link("../../../utils",{t:function(t){s=t},handleError:function(t){c=t},APIClient:function(t){p=t}},4),o.link("../../lib/ImporterProgressStep",{ProgressStep:function(t){u=t},ImportingStartedStates:function(t){l=t}},5),o.link("..",{ImporterWebsocketReceiver:function(t){m=t}},6),o.link("./adminImportProgress.html"),i.adminImportProgress.helpers({step:function(){return i.instance().step.get()},completed:function(){return i.instance().completed.get()},total:function(){return i.instance().total.get()},progressRate:function(){try{var t=i.instance(),e=t.completed.get(),o=t.total.get(),r=Math.floor(1e4*e/o)/100;return isNaN(r)?"":r+"%"}catch(n){return""}}}),i.adminImportProgress.onCreated((function(){var t=this;this.operation=new r(!1),this.step=new r(s("Loading...")),this.completed=new r(0),this.total=new r(0);var e=!1;function o(e){switch(e.step){case u.DONE:return a.success(s(e.step[0].toUpperCase()+e.step.slice(1))),n.go("/admin/import");case u.ERROR:case u.CANCELLED:return a.error(s(e.step[0].toUpperCase()+e.step.slice(1))),n.go("/admin/import");default:t.step.set(s(e.step[0].toUpperCase()+e.step.slice(1))),e.count.completed&&t.completed.set(e.count.completed),e.count.total&&t.total.set(e.count.total)}}this.progressUpdated=function(){function t(t){t.key.toLowerCase()===e&&o(t)}return t}(),p.get("v1/getCurrentImportOperation").then((function(r){var i=r.operation;return i.valid?l.includes(i.status)?(e=i.importerKey,t.operation.set(i),i.count&&(i.count.total&&t.total.set(i.count.total),i.count.completed&&t.completed.set(i.count.completed)),void p.get("v1/getImportProgress").then((function(e){if(!e)return a.warning(s("Importer_not_in_progress")),n.go("/admin/import/prepare");var r;o(e)||m.registerCallback(t.progressUpdated)})).catch((function(t){return console.warn("Error on getting the import progress:",t),t?c(t):a.error(s("Failed_To_Load_Import_Data")),n.go("/admin/import")}))):n.go("/admin/import/prepare"):n.go("/admin/import")})).catch((function(t){return t?c(t):a.error(s("Failed_To_Load_Import_Data")),n.go("/admin/import")}))})),i.adminImportProgress.onDestroyed((function(){m.unregisterCallback(this.progressUpdated)}))}

