function module(t,e,i){let o,s,n,a,r,l,c,m,u;i.link("meteor/reactive-var",{ReactiveVar(t){o=t}},0),i.link("meteor/tracker",{Tracker(t){s=t}},1),i.link("meteor/kadira:flow-router",{FlowRouter(t){n=t}},2),i.link("meteor/templating",{Template(t){a=t}},3),i.link("underscore",{default(t){r=t}},4),i.link("../../../ui-utils",{RocketChatTabBar(t){l=t},SideNav(t){c=t},TabBar(t){m=t}},5),i.link("../../../utils/client",{APIClient(t){u=t}},6);const f=50,d=500;a.adminEmoji.helpers({searchText(){const t=a.instance();return t.filter&&t.filter.get()},customemoji:()=>a.instance().emojis.get(),isLoading:()=>a.instance().isLoading.get(),flexData:()=>({tabBar:a.instance().tabBar,data:a.instance().tabBarData.get()}),onTableScroll(){const t=a.instance();return function(e){if(e.offsetHeight+e.scrollTop<e.scrollHeight-100)return;const i=t.emojis.get();t.total.get()>i.length&&t.offset.set(t.offset.get()+50)}},onTableItemClick(){const t=a.instance();return function(e){let{_id:i}=e;t.tabBarData.set({emoji:t.emojis.get().find(t=>t._id===i),onSuccess:t.onSuccessCallback}),t.tabBar.open("admin-emoji-info")}}}),a.adminEmoji.onCreated((async function(){const t=this;this.emojis=new o([]),this.offset=new o(0),this.total=new o(0),this.filter=new o(""),this.query=new o({}),this.isLoading=new o(!1),this.tabBar=new l,this.tabBar.showGroup(n.current().route.name),this.tabBarData=new o,m.addButton({groups:["emoji-custom"],id:"add-emoji",i18nTitle:"Custom_Emoji_Add",icon:"plus",template:"adminEmojiEdit",order:1}),m.addButton({groups:["emoji-custom"],id:"admin-emoji-info",i18nTitle:"Custom_Emoji_Info",icon:"customize",template:"adminEmojiInfo",order:2}),this.onSuccessCallback=()=>(this.offset.set(0),this.loadEmojis(this.query.get(),this.offset.get())),this.tabBarData.set({onSuccess:this.onSuccessCallback}),this.loadEmojis=r.debounce(async(t,e)=>{this.isLoading.set(!0);const{emojis:i,total:o}=await u.v1.get("emoji-custom.all?count=".concat(50,"&offset=").concat(e,"&query=").concat(JSON.stringify(t)));this.total.set(o),0===e?this.emojis.set(i):this.emojis.set(this.emojis.get().concat(i)),this.isLoading.set(!1)},500),this.autorun(()=>{this.filter.get(),this.offset.set(0)}),this.autorun(()=>{const t=this.filter.get()&&this.filter.get().trim(),e=this.offset.get();if(t){const i={$regex:t,$options:"i"};return this.loadEmojis({$or:[{name:i},{aliases:i}]},e)}return this.loadEmojis({},e)})})),a.adminEmoji.onRendered(()=>s.afterFlush((function(){c.setFlex("adminFlex"),c.openFlex()}))),a.adminEmoji.events({"keydown #emoji-filter"(t){13===t.which&&(t.stopPropagation(),t.preventDefault())},"keyup #emoji-filter"(t,e){t.stopPropagation(),t.preventDefault(),e.filter.set(t.currentTarget.value)}})}

