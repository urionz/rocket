function module(t,e,n){var o,i,s,r,c,u,l,a,f,d;n.link("@babel/runtime/regenerator",{default:function(t){o=t}},0),n.link("underscore",{default:function(t){i=t}},0),n.link("meteor/meteor",{Meteor:function(t){s=t}},1),n.link("meteor/templating",{Template:function(t){r=t}},2),n.link("meteor/tracker",{Tracker:function(t){c=t}},3),n.link("../ansispan",{ansispan:function(t){u=t}},4),n.link("../viewLogs",{stdout:function(t){l=t}},5),n.link("../../../authorization",{hasAllPermission:function(t){a=t}},6),n.link("../../../ui-utils/client",{SideNav:function(t){f=t}},7),n.link("./viewLogs.html"),n.link("./viewLogs.css"),n.link("../../../utils/client",{APIClient:function(t){d=t}},8);var m=new s.Streamer("stdout");r.viewLogs.onCreated(function(){function t(){var t,e;return o.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.awrap(d.v1.get("stdout.queue"));case 2:t=n.sent,((e=t.queue)||[]).forEach((function(t){return l.insert(t)})),m.on("stdout",(function(t){return l.insert(t)})),this.atBottom=!0;case 7:case"end":return n.stop()}}return n}(),null,this)}return t}()),r.viewLogs.onDestroyed((function(){l.remove({}),m.removeListener("stdout")})),r.viewLogs.helpers({hasPermission:function(){return a("view-logs")},logs:function(){return l.find({},{sort:{ts:1}})},ansispan:u}),r.viewLogs.events({"click .new-logs":function(t,e){e.atBottom=!0,e.sendToBottomIfNecessary()}}),r.viewLogs.onRendered((function(){var t=this;c.afterFlush((function(){f.setFlex("adminFlex"),f.openFlex()}));var e=this.find(".js-terminal"),n=this.find(".js-new-logs"),o;(this.isAtBottom=function(t){return null==t&&(t=0),e.scrollTop+t>=e.scrollHeight-e.clientHeight&&(n.className="new-logs not",!0)},this.sendToBottom=function(){e.scrollTop=e.scrollHeight-e.clientHeight,n.className="new-logs not"},this.checkIfScrollIsAtBottom=function(){t.atBottom=t.isAtBottom(100)},this.sendToBottomIfNecessary=function(){!0===t.atBottom&&!0!==t.isAtBottom()?t.sendToBottom():!1===t.atBottom&&(n.className="new-logs")},this.sendToBottomIfNecessaryDebounced=i.debounce(this.sendToBottomIfNecessary,10),this.sendToBottomIfNecessary(),window.MutationObserver)?new MutationObserver((function(e){e.forEach((function(){return t.sendToBottomIfNecessaryDebounced()}))})).observe(e,{childList:!0}):e.addEventListener("DOMSubtreeModified",(function(){return t.sendToBottomIfNecessaryDebounced()}));this.onWindowResize=function(){s.defer((function(){return t.sendToBottomIfNecessaryDebounced()}))},window.addEventListener("resize",this.onWindowResize),e.addEventListener("mousewheel",(function(){t.atBottom=!1,s.defer((function(){return t.checkIfScrollIsAtBottom()}))})),e.addEventListener("wheel",(function(){t.atBottom=!1,s.defer((function(){return t.checkIfScrollIsAtBottom()}))})),e.addEventListener("touchstart",(function(){t.atBottom=!1})),e.addEventListener("touchend",(function(){s.defer((function(){return t.checkIfScrollIsAtBottom()}))})),e.addEventListener("scroll",(function(){t.atBottom=!1,s.defer((function(){return t.checkIfScrollIsAtBottom()}))}))}))}

