function module(t,e,i){"use strict";var n=t("../core/core.defaults"),a=t("../helpers/index"),r=t("../core/core.scaleService"),o=t("../core/core.ticks");i.exports=function(t){var e=n.global,i={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:o.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function s(t){var e=t.options;return e.angleLines.display||e.pointLabels.display?t.chart.data.labels.length:0}function l(t){var i=t.options.pointLabels,n=a.valueOrDefault(i.fontSize,e.defaultFontSize),r=a.valueOrDefault(i.fontStyle,e.defaultFontStyle),o=a.valueOrDefault(i.fontFamily,e.defaultFontFamily),s;return{size:n,style:r,family:o,font:a.fontString(n,r,o)}}function d(t,e,i){return a.isArray(i)?{w:a.longestText(t,t.font,i),h:i.length*e+1.5*(i.length-1)*e}:{w:t.measureText(i).width,h:e}}function c(t,e,i,n,a){return t===n||t===a?{start:e-i/2,end:e+i/2}:t<n||t>a?{start:e-i-5,end:e}:{start:e,end:e+i+5}}function h(t){var e=l(t),i=Math.min(t.height/2,t.width/2),n={r:t.width,l:0,t:t.height,b:0},r={},o,h,u;t.ctx.font=e.font,t._pointLabelSizes=[];var f=s(t);for(o=0;o<f;o++){u=t.getPointPosition(o,i),h=d(t.ctx,e.size,t.pointLabels[o]||""),t._pointLabelSizes[o]=h;var g=t.getIndexAngle(o),p=a.toDegrees(g)%360,v=c(p,u.x,h.w,0,180),m=c(p,u.y,h.h,90,270);v.start<n.l&&(n.l=v.start,r.l=g),v.end>n.r&&(n.r=v.end,r.r=g),m.start<n.t&&(n.t=m.start,r.t=g),m.end>n.b&&(n.b=m.end,r.b=g)}t.setReductions(i,n,r)}function u(t){var e=Math.min(t.height/2,t.width/2);t.drawingArea=Math.round(e),t.setCenterPoint(0,0,0,0)}function f(t){return 0===t||180===t?"center":t<180?"left":"right"}function g(t,e,i,n){if(a.isArray(e))for(var r=i.y,o=1.5*n,s=0;s<e.length;++s)t.fillText(e[s],i.x,r),r+=o;else t.fillText(e,i.x,i.y)}function p(t,e,i){90===t||270===t?i.y-=e.h/2:(t>270||t<90)&&(i.y-=e.h)}function v(t){var i=t.ctx,n=t.options,r=n.angleLines,o=n.pointLabels;i.lineWidth=r.lineWidth,i.strokeStyle=r.color;var d=t.getDistanceFromCenterForValue(n.ticks.reverse?t.min:t.max),c=l(t);i.textBaseline="top";for(var h=s(t)-1;h>=0;h--){if(r.display){var u=t.getPointPosition(h,d);i.beginPath(),i.moveTo(t.xCenter,t.yCenter),i.lineTo(u.x,u.y),i.stroke(),i.closePath()}if(o.display){var v=t.getPointPosition(h,d+5),m=a.valueAtIndexOrDefault(o.fontColor,h,e.defaultFontColor);i.font=c.font,i.fillStyle=m;var b=t.getIndexAngle(h),x=a.toDegrees(b);i.textAlign=f(x),p(x,t._pointLabelSizes[h],v),g(i,t.pointLabels[h]||"",v,c.size)}}}function m(t,e,i,n){var r=t.ctx;if(r.strokeStyle=a.valueAtIndexOrDefault(e.color,n-1),r.lineWidth=a.valueAtIndexOrDefault(e.lineWidth,n-1),t.options.gridLines.circular)r.beginPath(),r.arc(t.xCenter,t.yCenter,i,0,2*Math.PI),r.closePath(),r.stroke();else{var o=s(t);if(0===o)return;r.beginPath();var l=t.getPointPosition(0,i);r.moveTo(l.x,l.y);for(var d=1;d<o;d++)l=t.getPointPosition(d,i),r.lineTo(l.x,l.y);r.closePath(),r.stroke()}}function b(t){return a.isNumber(t)?t:0}var x=t.LinearScaleBase.extend({setDimensions:function(){var t=this,i=t.options,n=i.ticks;t.width=t.maxWidth,t.height=t.maxHeight,t.xCenter=Math.round(t.width/2),t.yCenter=Math.round(t.height/2);var r=a.min([t.height,t.width]),o=a.valueOrDefault(n.fontSize,e.defaultFontSize);t.drawingArea=i.display?r/2-(o/2+n.backdropPaddingY):r/2},determineDataLimits:function(){var t=this,e=t.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;a.each(e.data.datasets,(function(r,o){if(e.isDatasetVisible(o)){var s=e.getDatasetMeta(o);a.each(r.data,(function(e,a){var r=+t.getRightValue(e);isNaN(r)||s.data[a].hidden||(i=Math.min(r,i),n=Math.max(r,n))}))}})),t.min=i===Number.POSITIVE_INFINITY?0:i,t.max=n===Number.NEGATIVE_INFINITY?0:n,t.handleTickRangeOptions()},getTickLimit:function(){var t=this.options.ticks,i=a.valueOrDefault(t.fontSize,e.defaultFontSize);return Math.min(t.maxTicksLimit?t.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*i)))},convertTicksToLabels:function(){var e=this;t.LinearScaleBase.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){this.options.pointLabels.display?h(this):u(this)},setReductions:function(t,e,i){var n=this,a=e.l/Math.sin(i.l),r=Math.max(e.r-n.width,0)/Math.sin(i.r),o=-e.t/Math.cos(i.t),s=-Math.max(e.b-n.height,0)/Math.cos(i.b);a=b(a),r=b(r),o=b(o),s=b(s),n.drawingArea=Math.min(Math.round(t-(a+r)/2),Math.round(t-(o+s)/2)),n.setCenterPoint(a,r,o,s)},setCenterPoint:function(t,e,i,n){var a=this,r=a.width-e-a.drawingArea,o=t+a.drawingArea,s=i+a.drawingArea,l=a.height-n-a.drawingArea;a.xCenter=Math.round((o+r)/2+a.left),a.yCenter=Math.round((s+l)/2+a.top)},getIndexAngle:function(t){var e,i,n;return t*(2*Math.PI/s(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var i=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*i:(t-e.min)*i},getPointPosition:function(t,e){var i=this,n=i.getIndexAngle(t)-Math.PI/2;return{x:Math.round(Math.cos(n)*e)+i.xCenter,y:Math.round(Math.sin(n)*e)+i.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this,e=t.min,i=t.max;return t.getPointPositionForValue(0,t.beginAtZero?0:e<0&&i<0?i:e>0&&i>0?e:0)},draw:function(){var t=this,i=t.options,n=i.gridLines,r=i.ticks,o=a.valueOrDefault;if(i.display){var s=t.ctx,l=this.getIndexAngle(0),d=o(r.fontSize,e.defaultFontSize),c=o(r.fontStyle,e.defaultFontStyle),h=o(r.fontFamily,e.defaultFontFamily),u=a.fontString(d,c,h);a.each(t.ticks,(function(i,a){if(a>0||r.reverse){var c=t.getDistanceFromCenterForValue(t.ticksAsNumbers[a]);if(n.display&&0!==a&&m(t,n,c,a),r.display){var h=o(r.fontColor,e.defaultFontColor);if(s.font=u,s.save(),s.translate(t.xCenter,t.yCenter),s.rotate(l),r.showLabelBackdrop){var f=s.measureText(i).width;s.fillStyle=r.backdropColor,s.fillRect(-f/2-r.backdropPaddingX,-c-d/2-r.backdropPaddingY,f+2*r.backdropPaddingX,d+2*r.backdropPaddingY)}s.textAlign="center",s.textBaseline="middle",s.fillStyle=h,s.fillText(i,0,-c),s.restore()}}})),(i.angleLines.display||i.pointLabels.display)&&v(t)}}});r.registerScaleType("radialLinear",x,i)}}

