function module(t,n,e){var o,i,r,a,s,u,c,f,l,m,d,h,g,p,v,k,b;e.link("@babel/runtime/regenerator",{default:function(t){o=t}},0),e.link("meteor/tracker",{Tracker:function(t){i=t}},0),e.link("meteor/reactive-var",{ReactiveVar:function(t){r=t}},1),e.link("meteor/kadira:flow-router",{FlowRouter:function(t){a=t}},2),e.link("meteor/session",{Session:function(t){s=t}},3),e.link("meteor/templating",{Template:function(t){u=t}},4),e.link("meteor/rocketchat:tap-i18n",{TAPi18n:function(t){c=t}},5),e.link("underscore",{default:function(t){f=t}},6),e.link("../../../ui-utils",{SideNav:function(t){l=t},RocketChatTabBar:function(t){m=t},TabBar:function(t){d=t}},7),e.link("../../../utils",{t:function(t){h=t},roomTypes:function(t){g=t}},8),e.link("../../../authorization",{hasAllPermission:function(t){p=t}},9),e.link("../../../channel-settings",{ChannelSettings:function(t){v=t}},10),e.link("../../../utils/lib/getAvatarURL",{getAvatarURL:function(t){k=t}},11),e.link("../../../utils/client",{APIClient:function(t){b=t}},12);var R=50,w=500;u.adminRooms.helpers({url:function(){return"d"===this.t?k({username:"@"+this.usernames[0]}):g.getConfig(this.t).getAvatarPath(this)},getIcon:function(){return g.getIcon(this)},roomName:function(){return"d"===this.t?this.usernames.join(" x "):g.getRoomName(this.t,this)},searchText:function(){var t=u.instance();return t.filter&&t.filter.get()},rooms:function(){return u.instance().rooms.get()},isLoading:function(){return u.instance().isLoading.get()},roomCount:function(){return u.instance().rooms.get().length},type:function(){return c.__(g.roomTypes[this.t].label)},default:function(){return this.default?h("True"):h("False")},flexData:function(){return{tabBar:u.instance().tabBar,data:u.instance().tabBarData.get()}},onTableScroll:function(){var t=u.instance();return function(n){if(!(n.offsetHeight+n.scrollTop<n.scrollHeight-100)){var e=t.rooms.get();t.total.get()>e.length&&t.offset.set(t.offset.get()+R)}}},onTableItemClick:function(){var t=u.instance();return function(n){s.set("adminRoomsSelected",{rid:n._id}),t.tabBarData.set({room:t.rooms.get().find((function(t){return t._id===n._id})),onSuccess:t.onSuccessCallback}),t.tabBar.open("admin-room")}}}),u.adminRooms.onCreated((function(){var t=this,n=this;this.offset=new r(0),this.total=new r(0),this.filter=new r(""),this.types=new r([]),this.rooms=new r([]),this.ready=new r(!0),this.isLoading=new r(!1),this.tabBar=new m,this.tabBarData=new r,this.tabBar.showGroup(a.current().route.name),d.addButton({groups:["admin-rooms"],id:"admin-room",i18nTitle:"Room_Info",icon:"info-circled",template:"adminRoomInfo",order:1}),v.addOption({group:["admin-room"],id:"make-default",template:"channelSettingsDefault",data:function(){return{room:n.tabBarData.get().room,onSuccess:n.tabBarData.get().onSuccess}},validation:function(){return p("view-room-administration")}}),this.onSuccessCallback=function(){return n.offset.set(0),n.loadRooms(n.types.get(),n.filter.get(),n.offset.get())},this.tabBarData.set({onSuccess:n.onSuccessCallback});var e=function(t){return t.reduce((function(t,n){return t+="types[]="+n+"&"}),"")};this.loadRooms=f.debounce(function(){function n(){var n,i,r,a,s,u,c,f=arguments;return o.async(function(){function l(l){for(;;)switch(l.prev=l.next){case 0:return n=f.length>0&&void 0!==f[0]?f[0]:[],i=f.length>1?f[1]:void 0,r=f.length>2?f[2]:void 0,t.isLoading.set(!0),a="rooms.adminRooms?count="+R+"&offset="+r+"&"+e(n),i&&(a+="filter="+encodeURIComponent(i)),l.next=8,o.awrap(b.v1.get(a));case 8:s=l.sent,u=s.rooms,c=s.total,t.total.set(c),0===r?t.rooms.set(u):t.rooms.set(t.rooms.get().concat(u)),t.isLoading.set(!1);case 14:case"end":return l.stop()}}return l}())}return n}(),500);var i=["c","d","p"];this.autorun((function(){n.filter.get(),n.types.get(),n.offset.set(0)})),this.autorun((function(){var e=n.filter.get(),o=n.offset.get(),r=n.types.get();return 0===r.length&&(r=i),t.loadRooms(r,e,o)})),this.getSearchTypes=function(){return f.map($("[name=room-type]:checked"),(function(t){return $(t).val()}))}})),u.adminRooms.onRendered((function(){i.afterFlush((function(){l.setFlex("adminFlex"),l.openFlex()}))})),u.adminRooms.events({"keydown #rooms-filter":function(t){13===t.which&&(t.stopPropagation(),t.preventDefault())},"keyup #rooms-filter":function(t,n){t.stopPropagation(),t.preventDefault(),n.filter.set(t.currentTarget.value)},"change [name=room-type]":function(t,n){n.types.set(n.getSearchTypes())}})}

