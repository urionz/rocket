function module(e,t,n){var r,a,u,l,i,c,o,s,f,p,v,d,m,g,k,E,b,S,h,y,x,T,F,w,_;n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){u=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},3),n.export({SettingsBasedStep:function(){return L}}),n.link("@rocket.chat/fuselage",{Field:function(e){i=e},FieldGroup:function(e){c=e},Flex:function(e){o=e},InputBox:function(e){s=e},Margins:function(e){f=e},SelectInput:function(e){p=e},Skeleton:function(e){v=e},TextInput:function(e){d=e}},0),n.link("react",{default:function(e){m=e},useEffect:function(e){g=e},useReducer:function(e){k=e},useState:function(e){E=e}},1),n.link("../../../contexts/SettingsContext",{useBatchSettingsDispatch:function(e){b=e}},2),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){S=e}},3),n.link("../../../contexts/TranslationContext",{useTranslation:function(e){h=e},useLanguages:function(e){y=e}},4),n.link("../../../hooks/useFocus",{useFocus:function(e){x=e}},5),n.link("../Pager",{Pager:function(e){T=e}},6),n.link("../SetupWizardState",{useSetupWizardContext:function(e){F=e}},7),n.link("../Step",{Step:function(e){w=e}},8),n.link("../StepHeader",{StepHeader:function(e){_=e}},9);var C=function(){var e="RESET",t="SET_VALUE",n=k((function(n,r){var a=r.type,l=r.payload;if(a===e)return l;if(a===t){var i=l._id,c=l.value;return n.map((function(e){return e._id===i?u({},e,{value:c}):e}))}return n}),[]),r=l(n,2),a=r[0],i=r[1],c,o;return{fields:a,resetFields:function(t){return i({type:e,payload:t})},setFieldValue:function(e,n){return i({type:t,payload:{_id:e,value:n}})}}};function L(e){var t=e.step,n=e.title,k=e.active,L=F(),z=L.settings,B=L.currentStep,D=L.goToPreviousStep,I=L.goToNextStep,P=C(),j=P.fields,q=P.resetFields,A=P.setFieldValue,M=E(!1),O=l(M,2),R=O[0],V=O[1],W=y();g((function(){q(z.filter((function(e){var n;return e.wizard.step===t})).filter((function(e){var t=e.type;return["string","select","language"].includes(t)})).sort((function(e,t){var n,r;return e.wizard.order-t.wizard.order})).map((function(e){var t=e.value,n=a(e,["value"]);return u({},n,{value:t||""})})))}),[z,B]);var H=h(),G=b(),N=x(k),U=S(),J=function(){D()},K=function(){function e(e){return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),V(!0),t.prev=2,t.next=5,r.awrap(G(j.map((function(e){var t,n;return{_id:e._id,value:e.value}}))));case 5:I(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),U({type:"error",message:t.t0});case 11:return t.prev=11,V(!1),t.finish(11);case 14:case"end":return t.stop()}}return t}(),null,null,[[2,8,11,14]])}return e}();return 0===j.length?m.createElement(w,{active:k,working:R,onSubmit:K},m.createElement(_,{number:t,title:n}),m.createElement(f,{blockEnd:"x32"},m.createElement(c,null,Array.from({length:5},(function(e,t){return m.createElement(i,{key:t},m.createElement(o.Item,{align:"stretch"},m.createElement(i.Label,null,m.createElement(v,{width:"50%"}))),m.createElement(s.Skeleton,null))}))))):m.createElement(w,{active:k,working:R,onSubmit:K},m.createElement(_,{number:t,title:n}),m.createElement(f,{blockEnd:"x32"},m.createElement(c,null,j.map((function(e,t){var n=e._id,r=e.type,a=e.i18nLabel,u=e.value,c=e.values;return m.createElement(i,{key:t},m.createElement(i.Label,{htmlFor:n},H(a)),m.createElement(i.Row,null,"string"===r&&m.createElement(d,{type:"text","data-qa":n,id:n,name:n,ref:0===t?N:void 0,value:u,onChange:function(e){var t=e.currentTarget.value;return A(n,t)}}),"select"===r&&m.createElement(p,{type:"select","data-qa":n,id:n,name:n,placeholder:H("Select_an_option"),ref:0===t?N:void 0,value:u,onChange:function(e){var t=e.currentTarget.value;return A(n,t)}},c.map((function(e){var t=e.i18nLabel,n=e.key;return{label:H(t),value:n}})).map((function(e){var t=e.label,n=e.value;return m.createElement(p.Option,{key:n,value:n},t)}))),"language"===r&&m.createElement(p,{type:"select","data-qa":n,id:n,name:n,placeholder:H("Default"),ref:0===t?N:void 0,value:u,onChange:function(e){var t=e.currentTarget.value;return A(n,t)}},Object.entries(W).map((function(e){var t=l(e,2),n=t[0],r;return{label:t[1].name,value:n}})).sort((function(e,t){return e.value-t.value})).map((function(e){var t=e.label,n=e.value;return m.createElement(p.Option,{key:n,value:n,dir:"auto"},t)})))))})))),m.createElement(T,{disabled:R,onBackClick:B>2&&J}))}}

