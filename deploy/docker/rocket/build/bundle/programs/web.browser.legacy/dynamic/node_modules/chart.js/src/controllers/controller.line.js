function module(o,t,e){"use strict";var r=o("../core/core.defaults"),i=o("../elements/index"),a=o("../helpers/index");r._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}}),e.exports=function(o){function t(o,t){return a.valueOrDefault(o.showLine,t.showLines)}o.controllers.line=o.DatasetController.extend({datasetElementType:i.Line,dataElementType:i.Point,update:function(o){var e=this,r=e.getMeta(),i=r.dataset,n=r.data||[],d=e.chart.options,l=d.elements.line,s=e.getScaleForId(r.yAxisID),u,c,p,h=e.getDataset(),b=t(h,d);for(b&&(p=i.custom||{},void 0!==h.tension&&void 0===h.lineTension&&(h.lineTension=h.tension),i._scale=s,i._datasetIndex=e.index,i._children=n,i._model={spanGaps:h.spanGaps?h.spanGaps:d.spanGaps,tension:p.tension?p.tension:a.valueOrDefault(h.lineTension,l.tension),backgroundColor:p.backgroundColor?p.backgroundColor:h.backgroundColor||l.backgroundColor,borderWidth:p.borderWidth?p.borderWidth:h.borderWidth||l.borderWidth,borderColor:p.borderColor?p.borderColor:h.borderColor||l.borderColor,borderCapStyle:p.borderCapStyle?p.borderCapStyle:h.borderCapStyle||l.borderCapStyle,borderDash:p.borderDash?p.borderDash:h.borderDash||l.borderDash,borderDashOffset:p.borderDashOffset?p.borderDashOffset:h.borderDashOffset||l.borderDashOffset,borderJoinStyle:p.borderJoinStyle?p.borderJoinStyle:h.borderJoinStyle||l.borderJoinStyle,fill:p.fill?p.fill:void 0!==h.fill?h.fill:l.fill,steppedLine:p.steppedLine?p.steppedLine:a.valueOrDefault(h.steppedLine,l.stepped),cubicInterpolationMode:p.cubicInterpolationMode?p.cubicInterpolationMode:a.valueOrDefault(h.cubicInterpolationMode,l.cubicInterpolationMode)},i.pivot()),u=0,c=n.length;u<c;++u)e.updateElement(n[u],u,o);for(b&&0!==i._model.tension&&e.updateBezierControlPoints(),u=0,c=n.length;u<c;++u)n[u].pivot()},getPointBackgroundColor:function(o,t){var e=this.chart.options.elements.point.backgroundColor,r=this.getDataset(),i=o.custom||{};return i.backgroundColor?e=i.backgroundColor:r.pointBackgroundColor?e=a.valueAtIndexOrDefault(r.pointBackgroundColor,t,e):r.backgroundColor&&(e=r.backgroundColor),e},getPointBorderColor:function(o,t){var e=this.chart.options.elements.point.borderColor,r=this.getDataset(),i=o.custom||{};return i.borderColor?e=i.borderColor:r.pointBorderColor?e=a.valueAtIndexOrDefault(r.pointBorderColor,t,e):r.borderColor&&(e=r.borderColor),e},getPointBorderWidth:function(o,t){var e=this.chart.options.elements.point.borderWidth,r=this.getDataset(),i=o.custom||{};return isNaN(i.borderWidth)?!isNaN(r.pointBorderWidth)||a.isArray(r.pointBorderWidth)?e=a.valueAtIndexOrDefault(r.pointBorderWidth,t,e):isNaN(r.borderWidth)||(e=r.borderWidth):e=i.borderWidth,e},getPointRotation:function(o,t){var e=this.chart.options.elements.point.rotation,r=this.getDataset(),i=o.custom||{};return isNaN(i.rotation)?isNaN(r.pointRotation)&&!a.isArray(r.pointRotation)||(e=a.valueAtIndexOrDefault(r.pointRotation,t,e)):e=i.rotation,e},updateElement:function(o,t,e){var r=this,i=r.getMeta(),n=o.custom||{},d=r.getDataset(),l=r.index,s=d.data[t],u=r.getScaleForId(i.yAxisID),c=r.getScaleForId(i.xAxisID),p=r.chart.options.elements.point,h,b;void 0!==d.radius&&void 0===d.pointRadius&&(d.pointRadius=d.radius),void 0!==d.hitRadius&&void 0===d.pointHitRadius&&(d.pointHitRadius=d.hitRadius),h=c.getPixelForValue("object"==typeof s?s:NaN,t,l),b=e?u.getBasePixel():r.calculatePointY(s,t,l),o._xScale=c,o._yScale=u,o._datasetIndex=l,o._index=t,o._model={x:h,y:b,skip:n.skip||isNaN(h)||isNaN(b),radius:n.radius||a.valueAtIndexOrDefault(d.pointRadius,t,p.radius),pointStyle:n.pointStyle||a.valueAtIndexOrDefault(d.pointStyle,t,p.pointStyle),rotation:r.getPointRotation(o,t),backgroundColor:r.getPointBackgroundColor(o,t),borderColor:r.getPointBorderColor(o,t),borderWidth:r.getPointBorderWidth(o,t),tension:i.dataset._model?i.dataset._model.tension:0,steppedLine:!!i.dataset._model&&i.dataset._model.steppedLine,hitRadius:n.hitRadius||a.valueAtIndexOrDefault(d.pointHitRadius,t,p.hitRadius)}},calculatePointY:function(o,t,e){var r=this,i=r.chart,a=r.getMeta(),n=r.getScaleForId(a.yAxisID),d=0,l=0,s,u,c;if(n.options.stacked){for(s=0;s<e;s++)if(u=i.data.datasets[s],"line"===(c=i.getDatasetMeta(s)).type&&c.yAxisID===n.id&&i.isDatasetVisible(s)){var p=Number(n.getRightValue(u.data[t]));p<0?l+=p||0:d+=p||0}var h=Number(n.getRightValue(o));return h<0?n.getPixelForValue(l+h):n.getPixelForValue(d+h)}return n.getPixelForValue(o)},updateBezierControlPoints:function(){var o=this,t=o.getMeta(),e=o.chart.chartArea,r=t.data||[],i,n,d,l,s;function u(o,t,e){return Math.max(Math.min(o,e),t)}if(t.dataset._model.spanGaps&&(r=r.filter((function(o){return!o._model.skip}))),"monotone"===t.dataset._model.cubicInterpolationMode)a.splineCurveMonotone(r);else for(i=0,n=r.length;i<n;++i)l=(d=r[i])._model,s=a.splineCurve(a.previousItem(r,i)._model,l,a.nextItem(r,i)._model,t.dataset._model.tension),l.controlPointPreviousX=s.previous.x,l.controlPointPreviousY=s.previous.y,l.controlPointNextX=s.next.x,l.controlPointNextY=s.next.y;if(o.chart.options.elements.line.capBezierPoints)for(i=0,n=r.length;i<n;++i)(l=r[i]._model).controlPointPreviousX=u(l.controlPointPreviousX,e.left,e.right),l.controlPointPreviousY=u(l.controlPointPreviousY,e.top,e.bottom),l.controlPointNextX=u(l.controlPointNextX,e.left,e.right),l.controlPointNextY=u(l.controlPointNextY,e.top,e.bottom)},draw:function(){var o=this,e=o.chart,r=o.getMeta(),i=r.data||[],n=e.chartArea,d=i.length,l,s=0;for(t(o.getDataset(),e.options)&&(l=(r.dataset._model.borderWidth||0)/2,a.canvas.clipArea(e.ctx,{left:n.left,right:n.right,top:n.top-l,bottom:n.bottom+l}),r.dataset.draw(),a.canvas.unclipArea(e.ctx));s<d;++s)i[s].draw(n)},setHoverStyle:function(o){var t=this.chart.data.datasets[o._datasetIndex],e=o._index,r=o.custom||{},i=o._model;o.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth,radius:i.radius},i.backgroundColor=r.hoverBackgroundColor||a.valueAtIndexOrDefault(t.pointHoverBackgroundColor,e,a.getHoverColor(i.backgroundColor)),i.borderColor=r.hoverBorderColor||a.valueAtIndexOrDefault(t.pointHoverBorderColor,e,a.getHoverColor(i.borderColor)),i.borderWidth=r.hoverBorderWidth||a.valueAtIndexOrDefault(t.pointHoverBorderWidth,e,i.borderWidth),i.radius=r.hoverRadius||a.valueAtIndexOrDefault(t.pointHoverRadius,e,this.chart.options.elements.point.hoverRadius)}})}}

