function module(t,e,n){var i,r,o,a,s,c,l,u;n.link("@babel/runtime/regenerator",{default:function(t){i=t}},0),n.link("meteor/reactive-var",{ReactiveVar:function(t){r=t}},0),n.link("meteor/templating",{Template:function(t){o=t}},1),n.link("moment",{default:function(t){a=t}},2),n.link("underscore",{default:function(t){s=t}},3),n.link("../../../../../models",{ChatRoom:function(t){c=t}},4),n.link("../../../../../utils",{t:function(t){l=t}},5),n.link("./visitorNavigation.html"),n.link("../../../../../utils/client",{APIClient:function(t){u=t}},6);var f=50;o.visitorNavigation.helpers({loadingNavigation:function(){return o.instance().isLoading.get()},pages:function(){var t;if(c.findOne({_id:this.rid},{fields:{"v.token":1}}))return o.instance().pages.get()},onTableScroll:function(){var t=o.instance();return function(e){if(e.offsetHeight+e.scrollTop>=e.scrollHeight-100)return t.limit.set(t.limit.get()+50)}},pageTitle:function(){return this.navigation.page.title||l("Empty_title")},accessDateTime:function(){return a(this.ts).format("L LTS")}}),o.visitorNavigation.events({"scroll .visitor-scroll":s.throttle((function(t,e){if(t.target.scrollTop>=t.target.scrollHeight-t.target.clientHeight){var n=e.pages.get();if(e.total.get()<=n.length)return;return e.offset.set(e.offset.get()+f)}}),200)}),o.visitorNavigation.onCreated(function(){function t(){var t=this,e;return i.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:e=o.currentData(),this.isLoading=new r(!0),this.pages=new r([]),this.offset=new r(0),this.ready=new r(!0),this.total=new r(0),this.autorun(function(){function n(){var n,r,o,a;return i.async(function(){function s(s){for(;;)switch(s.prev=s.next){case 0:if(t.isLoading.set(!0),n=t.offset.get(),!e||!e.rid){s.next=11;break}return s.next=5,i.awrap(u.v1.get("livechat/visitors.pagesVisited/"+e.rid+"?count="+f+"&offset="+n));case 5:r=s.sent,o=r.pages,a=r.total,t.isLoading.set(!1),t.total.set(a),t.pages.set(t.pages.get().concat(o));case 11:t.isLoading.set(!1);case 12:case"end":return s.stop()}}return s}())}return n}());case 7:case"end":return n.stop()}}return n}(),null,this)}return t}())}

