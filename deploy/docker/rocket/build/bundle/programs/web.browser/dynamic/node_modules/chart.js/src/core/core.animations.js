function module(n,t,a){"use strict";var e=n("./core.defaults"),r=n("../helpers/index");e._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:r.noop,onComplete:r.noop}}),a.exports={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(n,t,a,e){var r=this.animations,i,o;for(t.chart=n,e||(n.animating=!0),i=0,o=r.length;i<o;++i)if(r[i].chart===n)return void(r[i]=t);r.push(t),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(n){var t=r.findIndex(this.animations,(function(t){return t.chart===n}));-1!==t&&(this.animations.splice(t,1),n.animating=!1)},requestAnimationFrame:function(){var n=this;null===n.request&&(n.request=r.requestAnimFrame.call(window,(function(){n.request=null,n.startDigest()})))},startDigest:function(){var n=this,t=Date.now(),a=0;n.dropFrames>1&&(a=Math.floor(n.dropFrames),n.dropFrames=n.dropFrames%1),n.advance(1+a);var e=Date.now();n.dropFrames+=(e-t)/n.frameDuration,n.animations.length>0&&n.requestAnimationFrame()},advance:function(n){for(var t=this.animations,a,e,i=0;i<t.length;)e=(a=t[i]).chart,a.currentStep=(a.currentStep||0)+n,a.currentStep=Math.min(a.currentStep,a.numSteps),r.callback(a.render,[e,a],e),r.callback(a.onAnimationProgress,[a],e),a.currentStep>=a.numSteps?(r.callback(a.onAnimationComplete,[a],e),e.animating=!1,t.splice(i,1)):++i}}}

