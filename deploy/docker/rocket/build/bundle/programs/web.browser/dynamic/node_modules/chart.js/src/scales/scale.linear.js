function module(t,i,a){"use strict";var e=t("../core/core.defaults"),n=t("../helpers/index"),s=t("../core/core.scaleService"),r=t("../core/core.ticks");a.exports=function(t){var i={position:"left",ticks:{callback:r.formatters.linear}},a=t.LinearScaleBase.extend({determineDataLimits:function(){var t=this,i=t.options,a=t.chart,e,s=a.data.datasets,r=t.isHorizontal(),o=0,l=1;function c(i){return r?i.xAxisID===t.id:i.yAxisID===t.id}t.min=null,t.max=null;var u=i.stacked;if(void 0===u&&n.each(s,(function(t,i){if(!u){var e=a.getDatasetMeta(i);a.isDatasetVisible(i)&&c(e)&&void 0!==e.stack&&(u=!0)}})),i.stacked||u){var m={};n.each(s,(function(e,s){var r=a.getDatasetMeta(s),o=[r.type,void 0===i.stacked&&void 0===r.stack?s:"",r.stack].join(".");void 0===m[o]&&(m[o]={positiveValues:[],negativeValues:[]});var l=m[o].positiveValues,u=m[o].negativeValues;a.isDatasetVisible(s)&&c(r)&&n.each(e.data,(function(a,e){var n=+t.getRightValue(a);isNaN(n)||r.data[e].hidden||(l[e]=l[e]||0,u[e]=u[e]||0,i.relativePoints?l[e]=100:n<0?u[e]+=n:l[e]+=n)}))})),n.each(m,(function(i){var a=i.positiveValues.concat(i.negativeValues),e=n.min(a),s=n.max(a);t.min=null===t.min?e:Math.min(t.min,e),t.max=null===t.max?s:Math.max(t.max,s)}))}else n.each(s,(function(i,e){var s=a.getDatasetMeta(e);a.isDatasetVisible(e)&&c(s)&&n.each(i.data,(function(i,a){var e=+t.getRightValue(i);isNaN(e)||s.data[a].hidden||(null===t.min?t.min=e:e<t.min&&(t.min=e),null===t.max?t.max=e:e>t.max&&(t.max=e))}))}));t.min=isFinite(t.min)&&!isNaN(t.min)?t.min:0,t.max=isFinite(t.max)&&!isNaN(t.max)?t.max:1,this.handleTickRangeOptions()},getTickLimit:function(){var t,i=this,a=i.options.ticks;if(i.isHorizontal())t=Math.min(a.maxTicksLimit?a.maxTicksLimit:11,Math.ceil(i.width/50));else{var s=n.valueOrDefault(a.fontSize,e.global.defaultFontSize);t=Math.min(a.maxTicksLimit?a.maxTicksLimit:11,Math.ceil(i.height/(2*s)))}return t},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,i){return+this.getRightValue(this.chart.data.datasets[i].data[t])},getPixelForValue:function(t){var i=this,a=i.start,e=+i.getRightValue(t),n,s=i.end-a;return n=i.isHorizontal()?i.left+i.width/s*(e-a):i.bottom-i.height/s*(e-a)},getValueForPixel:function(t){var i=this,a=i.isHorizontal(),e=a?i.width:i.height,n=(a?t-i.left:i.bottom-t)/e;return i.start+(i.end-i.start)*n},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}});s.registerScaleType("linear",a,i)}}

