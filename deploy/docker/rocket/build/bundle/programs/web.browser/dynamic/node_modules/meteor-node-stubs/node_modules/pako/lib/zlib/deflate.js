function module(t,a){"use strict";var e=t("../utils/common"),s=t("./trees"),i=t("./adler32"),n=t("./crc32"),r=t("./messages"),h=0,l=1,_=3,d=4,o=5,u=0,g=1,f=-2,c=-3,m=-5,p=-1,w=1,v=2,k=3,z=4,b=0,x=2,y=8,B=9,S=15,I=8,A=29,C=256,R=286,j=30,D=19,E=2*R+1,H=15,K=3,N=258,q=N+K+1,F=32,G=42,J=69,L=73,M=91,O=103,P=113,Q=666,T=1,U=2,V=3,W=4,X=3,Y;function Z(t,a){return t.msg=r[a],a}function $(t){return(t<<1)-(t>4?9:0)}function tt(t){for(var a=t.length;--a>=0;)t[a]=0}function at(t){var a=t.state,s=a.pending;s>t.avail_out&&(s=t.avail_out),0!==s&&(e.arraySet(t.output,a.pending_buf,a.pending_out,s,t.next_out),t.next_out+=s,a.pending_out+=s,t.total_out+=s,t.avail_out-=s,a.pending-=s,0===a.pending&&(a.pending_out=0))}function et(t,a){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,a),t.block_start=t.strstart,at(t.strm)}function st(t,a){t.pending_buf[t.pending++]=a}function it(t,a){t.pending_buf[t.pending++]=a>>>8&255,t.pending_buf[t.pending++]=255&a}function nt(t,a,s,r){var h=t.avail_in;return h>r&&(h=r),0===h?0:(t.avail_in-=h,e.arraySet(a,t.input,t.next_in,h,s),1===t.state.wrap?t.adler=i(t.adler,a,h,s):2===t.state.wrap&&(t.adler=n(t.adler,a,h,s)),t.next_in+=h,t.total_in+=h,h)}function rt(t,a){var e=t.max_chain_length,s=t.strstart,i,n,r=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-q?t.strstart-(t.w_size-q):0,_=t.window,d=t.w_mask,o=t.prev,u=t.strstart+N,g=_[s+r-1],f=_[s+r];t.prev_length>=t.good_match&&(e>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(i=a)+r]===f&&_[i+r-1]===g&&_[i]===_[s]&&_[++i]===_[s+1]){s+=2,i++;do{}while(_[++s]===_[++i]&&_[++s]===_[++i]&&_[++s]===_[++i]&&_[++s]===_[++i]&&_[++s]===_[++i]&&_[++s]===_[++i]&&_[++s]===_[++i]&&_[++s]===_[++i]&&s<u);if(n=N-(u-s),s=u-N,n>r){if(t.match_start=a,r=n,n>=h)break;g=_[s+r-1],f=_[s+r]}}}while((a=o[a&d])>l&&0!=--e);return r<=t.lookahead?r:t.lookahead}function ht(t){var a=t.w_size,s,i,n,r,h;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-q)){e.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,s=i=t.hash_size;do{n=t.head[--s],t.head[s]=n>=a?n-a:0}while(--i);s=i=a;do{n=t.prev[--s],t.prev[s]=n>=a?n-a:0}while(--i);r+=a}if(0===t.strm.avail_in)break;if(i=nt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=K)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+K-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<K)););}while(t.lookahead<q&&0!==t.strm.avail_in)}function lt(t,a){var e=65535;for(e>t.pending_buf_size-5&&(e=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ht(t),0===t.lookahead&&a===h)return T;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var s=t.block_start+e;if((0===t.strstart||t.strstart>=s)&&(t.lookahead=t.strstart-s,t.strstart=s,et(t,!1),0===t.strm.avail_out))return T;if(t.strstart-t.block_start>=t.w_size-q&&(et(t,!1),0===t.strm.avail_out))return T}return t.insert=0,a===d?(et(t,!0),0===t.strm.avail_out?V:W):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),T)}function _t(t,a){for(var e,i;;){if(t.lookahead<q){if(ht(t),t.lookahead<q&&a===h)return T;if(0===t.lookahead)break}if(e=0,t.lookahead>=K&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+K-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==e&&t.strstart-e<=t.w_size-q&&(t.match_length=rt(t,e)),t.match_length>=K)if(i=s._tr_tally(t,t.strstart-t.match_start,t.match_length-K),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=K){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+K-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(et(t,!1),0===t.strm.avail_out))return T}return t.insert=t.strstart<K-1?t.strstart:K-1,a===d?(et(t,!0),0===t.strm.avail_out?V:W):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?T:U}function dt(t,a){for(var e,i,n;;){if(t.lookahead<q){if(ht(t),t.lookahead<q&&a===h)return T;if(0===t.lookahead)break}if(e=0,t.lookahead>=K&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+K-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=K-1,0!==e&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-q&&(t.match_length=rt(t,e),t.match_length<=5&&(t.strategy===w||t.match_length===K&&t.strstart-t.match_start>4096)&&(t.match_length=K-1)),t.prev_length>=K&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-K,i=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-K),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+K-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=K-1,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return T}else if(t.match_available){if((i=s._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return T}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<K-1?t.strstart:K-1,a===d?(et(t,!0),0===t.strm.avail_out?V:W):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?T:U}function ot(t,a){for(var e,i,n,r,l=t.window;;){if(t.lookahead<=N){if(ht(t),t.lookahead<=N&&a===h)return T;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=K&&t.strstart>0&&(i=l[n=t.strstart-1])===l[++n]&&i===l[++n]&&i===l[++n]){r=t.strstart+N;do{}while(i===l[++n]&&i===l[++n]&&i===l[++n]&&i===l[++n]&&i===l[++n]&&i===l[++n]&&i===l[++n]&&i===l[++n]&&n<r);t.match_length=N-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=K?(e=s._tr_tally(t,1,t.match_length-K),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(e=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),e&&(et(t,!1),0===t.strm.avail_out))return T}return t.insert=0,a===d?(et(t,!0),0===t.strm.avail_out?V:W):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?T:U}function ut(t,a){for(var e;;){if(0===t.lookahead&&(ht(t),0===t.lookahead)){if(a===h)return T;break}if(t.match_length=0,e=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,e&&(et(t,!1),0===t.strm.avail_out))return T}return t.insert=0,a===d?(et(t,!0),0===t.strm.avail_out?V:W):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?T:U}function gt(t,a,e,s,i){this.good_length=t,this.max_lazy=a,this.nice_length=e,this.max_chain=s,this.func=i}function ft(t){t.window_size=2*t.w_size,tt(t.head),t.max_lazy_match=Y[t.level].max_lazy,t.good_match=Y[t.level].good_length,t.nice_match=Y[t.level].nice_length,t.max_chain_length=Y[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=K-1,t.match_available=0,t.ins_h=0}function ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(2*E),this.dyn_dtree=new e.Buf16(2*(2*j+1)),this.bl_tree=new e.Buf16(2*(2*D+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(H+1),this.heap=new e.Buf16(2*R+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*R+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function mt(t){var a;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=x,(a=t.state).pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?G:P,t.adler=2===a.wrap?0:1,a.last_flush=h,s._tr_init(a),u):Z(t,f)}function pt(t){var a=mt(t);return a===u&&ft(t.state),a}function wt(t,a){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=a,u):f}function vt(t,a,s,i,n,r){if(!t)return f;var h=1;if(a===p&&(a=6),i<0?(h=0,i=-i):i>15&&(h=2,i-=16),n<1||n>B||s!==y||i<8||i>15||a<0||a>9||r<0||r>z)return Z(t,f);8===i&&(i=9);var l=new ct;return t.state=l,l.strm=t,l.wrap=h,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=n+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+K-1)/K),l.window=new e.Buf8(2*l.w_size),l.head=new e.Buf16(l.hash_size),l.prev=new e.Buf16(l.w_size),l.lit_bufsize=1<<n+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new e.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=a,l.strategy=r,l.method=s,pt(t)}function kt(t,a){return vt(t,a,y,S,I,b)}function zt(t,a){var e,i,r,c;if(!t||!t.state||a>o||a<0)return t?Z(t,f):f;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===Q&&a!==d)return Z(t,0===t.avail_out?m:f);if(i.strm=t,e=i.last_flush,i.last_flush=a,i.status===G)if(2===i.wrap)t.adler=0,st(i,31),st(i,139),st(i,8),i.gzhead?(st(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),st(i,255&i.gzhead.time),st(i,i.gzhead.time>>8&255),st(i,i.gzhead.time>>16&255),st(i,i.gzhead.time>>24&255),st(i,9===i.level?2:i.strategy>=v||i.level<2?4:0),st(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(st(i,255&i.gzhead.extra.length),st(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=n(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=J):(st(i,0),st(i,0),st(i,0),st(i,0),st(i,0),st(i,9===i.level?2:i.strategy>=v||i.level<2?4:0),st(i,X),i.status=P);else{var p=y+(i.w_bits-8<<4)<<8,w=-1;p|=(w=i.strategy>=v||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=F),p+=31-p%31,i.status=P,it(i,p),0!==i.strstart&&(it(i,t.adler>>>16),it(i,65535&t.adler)),t.adler=1}if(i.status===J)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=n(t.adler,i.pending_buf,i.pending-r,r)),at(t),r=i.pending,i.pending!==i.pending_buf_size));)st(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=n(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=L)}else i.status=L;if(i.status===L)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=n(t.adler,i.pending_buf,i.pending-r,r)),at(t),r=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,st(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>r&&(t.adler=n(t.adler,i.pending_buf,i.pending-r,r)),0===c&&(i.gzindex=0,i.status=M)}else i.status=M;if(i.status===M)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=n(t.adler,i.pending_buf,i.pending-r,r)),at(t),r=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,st(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>r&&(t.adler=n(t.adler,i.pending_buf,i.pending-r,r)),0===c&&(i.status=O)}else i.status=O;if(i.status===O&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&at(t),i.pending+2<=i.pending_buf_size&&(st(i,255&t.adler),st(i,t.adler>>8&255),t.adler=0,i.status=P)):i.status=P),0!==i.pending){if(at(t),0===t.avail_out)return i.last_flush=-1,u}else if(0===t.avail_in&&$(a)<=$(e)&&a!==d)return Z(t,m);if(i.status===Q&&0!==t.avail_in)return Z(t,m);if(0!==t.avail_in||0!==i.lookahead||a!==h&&i.status!==Q){var z=i.strategy===v?ut(i,a):i.strategy===k?ot(i,a):Y[i.level].func(i,a);if(z!==V&&z!==W||(i.status=Q),z===T||z===V)return 0===t.avail_out&&(i.last_flush=-1),u;if(z===U&&(a===l?s._tr_align(i):a!==o&&(s._tr_stored_block(i,0,0,!1),a===_&&(tt(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),at(t),0===t.avail_out))return i.last_flush=-1,u}return a!==d?u:i.wrap<=0?g:(2===i.wrap?(st(i,255&t.adler),st(i,t.adler>>8&255),st(i,t.adler>>16&255),st(i,t.adler>>24&255),st(i,255&t.total_in),st(i,t.total_in>>8&255),st(i,t.total_in>>16&255),st(i,t.total_in>>24&255)):(it(i,t.adler>>>16),it(i,65535&t.adler)),at(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?u:g)}function bt(t){var a;return t&&t.state?(a=t.state.status)!==G&&a!==J&&a!==L&&a!==M&&a!==O&&a!==P&&a!==Q?Z(t,f):(t.state=null,a===P?Z(t,c):u):f}function xt(t,a){var s=a.length,n,r,h,l,_,d,o,g;if(!t||!t.state)return f;if(2===(l=(n=t.state).wrap)||1===l&&n.status!==G||n.lookahead)return f;for(1===l&&(t.adler=i(t.adler,a,s,0)),n.wrap=0,s>=n.w_size&&(0===l&&(tt(n.head),n.strstart=0,n.block_start=0,n.insert=0),g=new e.Buf8(n.w_size),e.arraySet(g,a,s-n.w_size,n.w_size,0),a=g,s=n.w_size),_=t.avail_in,d=t.next_in,o=t.input,t.avail_in=s,t.next_in=0,t.input=a,ht(n);n.lookahead>=K;){r=n.strstart,h=n.lookahead-(K-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+K-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--h);n.strstart=r,n.lookahead=K-1,ht(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=K-1,n.match_available=0,t.next_in=d,t.input=o,t.avail_in=_,n.wrap=l,u}Y=[new gt(0,0,0,0,lt),new gt(4,4,8,4,_t),new gt(4,5,16,8,_t),new gt(4,6,32,32,_t),new gt(4,4,16,16,dt),new gt(8,16,32,32,dt),new gt(8,16,128,128,dt),new gt(8,32,128,256,dt),new gt(32,128,258,1024,dt),new gt(32,258,258,4096,dt)],a.deflateInit=kt,a.deflateInit2=vt,a.deflateReset=pt,a.deflateResetKeep=mt,a.deflateSetHeader=wt,a.deflate=zt,a.deflateEnd=bt,a.deflateSetDictionary=xt,a.deflateInfo="pako deflate (from Nodeca project)"}

