function module(e,t,a){"use strict";var r=e("../core/core.defaults"),n=e("../elements/index"),o=e("../helpers/index");r._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var a=e.data,r=a.datasets,n=a.labels;if(r.length)for(var o=0;o<r[0].data.length;++o)t.push('<li><span style="background-color:'+r[0].backgroundColor[o]+'"></span>'),n[o]&&t.push(n[o]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(a,r){var n=e.getDatasetMeta(0),d=t.datasets[0],i,l=n.data[r].custom||{},s=o.valueAtIndexOrDefault,u=e.options.elements.arc,c,h,g;return{text:a,fillStyle:l.backgroundColor?l.backgroundColor:s(d.backgroundColor,r,u.backgroundColor),strokeStyle:l.borderColor?l.borderColor:s(d.borderColor,r,u.borderColor),lineWidth:l.borderWidth?l.borderWidth:s(d.borderWidth,r,u.borderWidth),hidden:isNaN(d.data[r])||n.data[r].hidden,index:r}})):[]}},onClick:function(e,t){var a=t.index,r=this.chart,n,o,d;for(n=0,o=(r.data.datasets||[]).length;n<o;++n)(d=r.getDatasetMeta(n)).data[a].hidden=!d.data[a].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}}),a.exports=function(e){e.controllers.polarArea=e.DatasetController.extend({dataElementType:n.Arc,linkScales:o.noop,update:function(e){var t=this,a=t.getDataset(),r=t.getMeta(),n=t.chart.options.startAngle||0,d=t._starts=[],i=t._angles=[],l,s,u;for(t._updateRadius(),r.count=t.countVisibleElements(),l=0,s=a.data.length;l<s;l++)d[l]=n,u=t._computeAngle(l),i[l]=u,n+=u;o.each(r.data,(function(a,r){t.updateElement(a,r,e)}))},_updateRadius:function(){var e=this,t=e.chart,a=t.chartArea,r=t.options,n=r.elements.arc,o=Math.min(a.right-a.left,a.bottom-a.top);t.outerRadius=Math.max((o-n.borderWidth/2)/2,0),t.innerRadius=Math.max(r.cutoutPercentage?t.outerRadius/100*r.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,a){var r=this,n=r.chart,d=r.getDataset(),i=n.options,l=i.animation,s=n.scale,u=n.data.labels,c=s.xCenter,h=s.yCenter,g=i.startAngle,b=e.hidden?0:s.getDistanceFromCenterForValue(d.data[t]),p=r._starts[t],m=p+(e.hidden?0:r._angles[t]),C=l.animateScale?0:s.getDistanceFromCenterForValue(d.data[t]);o.extend(e,{_datasetIndex:r.index,_index:t,_scale:s,_model:{x:c,y:h,innerRadius:0,outerRadius:a?C:b,startAngle:a&&l.animateRotate?g:p,endAngle:a&&l.animateRotate?g:m,label:o.valueAtIndexOrDefault(u,t,u[t])}});var f=this.chart.options.elements.arc,x=e.custom||{},v=o.valueAtIndexOrDefault,k=e._model;k.backgroundColor=x.backgroundColor?x.backgroundColor:v(d.backgroundColor,t,f.backgroundColor),k.borderColor=x.borderColor?x.borderColor:v(d.borderColor,t,f.borderColor),k.borderWidth=x.borderWidth?x.borderWidth:v(d.borderWidth,t,f.borderWidth),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),a=0;return o.each(t.data,(function(t,r){isNaN(e.data[r])||t.hidden||a++})),a},_computeAngle:function(e){var t=this,a=this.getMeta().count,r=t.getDataset(),n=t.getMeta();if(isNaN(r.data[e])||n.data[e].hidden)return 0;var d={chart:t.chart,dataIndex:e,dataset:r,datasetIndex:t.index};return o.options.resolve([t.chart.options.elements.arc.angle,2*Math.PI/a],d,e)}})}}

