function module(t,e,s){let a,i,n,o,r,u,l,c,d,f;s.link("underscore",{default(t){a=t}},0),s.link("meteor/templating",{Template(t){i=t}},1),s.link("meteor/reactive-var",{ReactiveVar(t){n=t}},2),s.link("meteor/kadira:flow-router",{FlowRouter(t){o=t}},3),s.link("meteor/tracker",{Tracker(t){r=t}},4),s.link("../../../ui-utils",{TabBar(t){u=t},SideNav(t){l=t},RocketChatTabBar(t){c=t}},5),s.link("../../../utils",{t(t){d=t}},6),s.link("../../../utils/client",{APIClient(t){f=t}},7);const h=50,m=500;i.adminUserStatus.helpers({searchText(){const t=i.instance();return t.filter&&t.filter.get()},customUserStatus:()=>i.instance().statuses.get().map(t=>{const{_id:e,name:s,statusType:a}=t,i=a?d(a):"";return{_id:e,name:s,statusType:a,localizedStatusType:i}}),isLoading:()=>i.instance().isLoading.get(),flexData:()=>({tabBar:i.instance().tabBar,data:i.instance().tabBarData.get()}),onTableScroll(){const t=i.instance();return function(e){if(e.offsetHeight+e.scrollTop<e.scrollHeight-100)return;const s=t.statuses.get();t.total.get()>s.length&&t.offset.set(t.offset.get()+50)}},onTableItemClick(){const t=i.instance();return function(e){t.tabBarData.set({status:t.statuses.get().find(t=>t._id===e._id),onSuccess:t.onSuccessCallback}),t.tabBar.showGroup("user-status-custom-selected"),t.tabBar.open("admin-user-status-info")}}}),i.adminUserStatus.onCreated((function(){const t=this;this.limit=new n(50),this.filter=new n(""),this.ready=new n(!1),this.total=new n(0),this.query=new n({}),this.statuses=new n([]),this.isLoading=new n(!1),this.offset=new n(0),this.tabBar=new c,this.tabBar.showGroup(o.current().route.name),this.tabBarData=new n,u.addButton({groups:["user-status-custom","user-status-custom-selected"],id:"add-user-status",i18nTitle:"Custom_User_Status_Add",icon:"plus",template:"adminUserStatusEdit",order:1}),u.addButton({groups:["user-status-custom-selected"],id:"admin-user-status-info",i18nTitle:"Custom_User_Status_Info",icon:"customize",template:"adminUserStatusInfo",order:2}),this.onSuccessCallback=()=>(this.offset.set(0),this.loadStatus(this.query.get(),this.offset.get())),this.tabBarData.set({onSuccess:this.onSuccessCallback}),this.loadStatus=a.debounce(async(t,e)=>{this.isLoading.set(!0);const{statuses:s,total:a}=await f.v1.get("custom-user-status.list",{count:50,offset:e,query:JSON.stringify(t)});this.total.set(a),0===e?this.statuses.set(s):this.statuses.set(this.statuses.get().concat(s)),this.isLoading.set(!1)},500),this.autorun(()=>{const t=this.filter.get()&&this.filter.get().trim(),e=this.offset.get();if(t){const s={$regex:t,$options:"i"};return this.loadStatus({name:s},e)}return this.loadStatus({},e)})})),i.adminUserStatus.onRendered(()=>r.afterFlush((function(){l.setFlex("adminFlex"),l.openFlex()}))),i.adminUserStatus.events({"keydown #user-status-filter"(t){13===t.which&&(t.stopPropagation(),t.preventDefault())},"keyup #user-status-filter"(t,e){t.stopPropagation(),t.preventDefault(),e.filter.set(t.currentTarget.value),e.offset.set(0)},"click .load-more"(t,e){t.preventDefault(),t.stopPropagation(),e.limit.set(e.limit.get()+50)}})}

