function module(e,i,t){let a,n,s,l,o,r,c,f;t.link("meteor/meteor",{Meteor(e){a=e}},0),t.link("meteor/reactive-var",{ReactiveVar(e){n=e}},1),t.link("meteor/templating",{Template(e){s=e}},2),t.link("underscore.string",{default(e){l=e}},3),t.link("toastr",{default(e){o=e}},4),t.link("../../../../utils",{t(e){r=e},handleError(e){c=e}},5),t.link("./livechatAppearance.html"),t.link("../../../../utils/client",{APIClient(e){f=e}},6);const h=(e,i)=>e.appearance.get()&&e.appearance.get().find(e=>e._id===i);s.livechatAppearance.helpers({color:()=>s.instance().color.get(),showAgentInfo:()=>s.instance().showAgentInfo.get(),showAgentEmail:()=>s.instance().showAgentEmail.get(),title:()=>s.instance().title.get(),colorOffline:()=>s.instance().colorOffline.get(),titleOffline:()=>s.instance().titleOffline.get(),offlineMessage:()=>s.instance().offlineMessage.get(),sampleOfflineMessage:()=>s.instance().offlineMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2"),offlineSuccessMessage:()=>s.instance().offlineSuccessMessage.get(),sampleOfflineSuccessMessage:()=>s.instance().offlineSuccessMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2"),showAgentInfoFormTrueChecked(){if(s.instance().showAgentInfo.get())return"checked"},showAgentInfoFormFalseChecked(){if(!s.instance().showAgentInfo.get())return"checked"},showAgentEmailFormTrueChecked(){if(s.instance().showAgentEmail.get())return"checked"},showAgentEmailFormFalseChecked(){if(!s.instance().showAgentEmail.get())return"checked"},displayOfflineFormTrueChecked(){if(s.instance().displayOfflineForm.get())return"checked"},displayOfflineFormFalseChecked(){if(!s.instance().displayOfflineForm.get())return"checked"},offlineUnavailableMessage:()=>s.instance().offlineUnavailableMessage.get(),sampleOfflineUnavailableMessage:()=>s.instance().offlineUnavailableMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2"),emailOffline:()=>s.instance().offlineEmail.get(),conversationFinishedMessage:()=>s.instance().conversationFinishedMessage.get(),conversationFinishedText:()=>s.instance().conversationFinishedText.get(),registrationFormEnabled(){if(s.instance().registrationFormEnabled.get())return"checked"},registrationFormNameFieldEnabled(){if(s.instance().registrationFormNameFieldEnabled.get())return"checked"},registrationFormEmailFieldEnabled(){if(s.instance().registrationFormEmailFieldEnabled.get())return"checked"},registrationFormMessage:()=>s.instance().registrationFormMessage.get()}),s.livechatAppearance.onCreated((async function(){this.appearance=new n([]),this.title=new n(null),this.color=new n(null),this.showAgentInfo=new n(null),this.showAgentEmail=new n(null),this.displayOfflineForm=new n(null),this.offlineUnavailableMessage=new n(null),this.offlineMessage=new n(null),this.offlineSuccessMessage=new n(null),this.titleOffline=new n(null),this.colorOffline=new n(null),this.offlineEmail=new n(null),this.conversationFinishedMessage=new n(null),this.conversationFinishedText=new n(null),this.registrationFormEnabled=new n(null),this.registrationFormNameFieldEnabled=new n(null),this.registrationFormEmailFieldEnabled=new n(null),this.registrationFormMessage=new n(null);const{appearance:e}=await f.v1.get("livechat/appearance");this.appearance.set(e);const i=h(this,"Livechat_title"),t=h(this,"Livechat_title_color"),a=h(this,"Livechat_show_agent_info"),s=h(this,"Livechat_show_agent_email"),l=h(this,"Livechat_display_offline_form"),o=h(this,"Livechat_offline_form_unavailable"),r=h(this,"Livechat_offline_message"),c=h(this,"Livechat_offline_success_message"),g=h(this,"Livechat_offline_title"),_=h(this,"Livechat_offline_title_color"),v=h(this,"Livechat_offline_email"),m=h(this,"Livechat_conversation_finished_message"),u=h(this,"Livechat_registration_form_message"),d=h(this,"Livechat_registration_form"),F=h(this,"Livechat_name_field_registration_form"),p=h(this,"Livechat_email_field_registration_form"),L=h(this,"Livechat_conversation_finished_text");this.title.set(i&&i.value),this.color.set(t&&t.value),this.showAgentInfo.set(a&&a.value),this.showAgentEmail.set(s&&s.value),this.displayOfflineForm.set(l&&l.value),this.offlineUnavailableMessage.set(o&&o.value),this.offlineMessage.set(r&&r.value),this.offlineSuccessMessage.set(c&&c.value),this.titleOffline.set(g&&g.value),this.colorOffline.set(_&&_.value),this.offlineEmail.set(v&&v.value),this.conversationFinishedMessage.set(m&&m.value),this.registrationFormMessage.set(u&&u.value),this.registrationFormEnabled.set(d&&d.value),this.registrationFormNameFieldEnabled.set(F&&F.value),this.registrationFormEmailFieldEnabled.set(p&&p.value),this.conversationFinishedText.set(L&&L.value)})),s.livechatAppearance.events({"change .js-input-check"(e,i){i[e.currentTarget.name].set(e.currentTarget.checked)},"change .preview-settings, keyup .preview-settings"(e,i){let{value:t}=e.currentTarget;"radio"===e.currentTarget.type&&(t="true"===t),i[e.currentTarget.name].set(t)},"click .reset-settings"(e,i){e.preventDefault();const t=h(i,"Livechat_title");i.title.set(t&&t.value);const a=h(i,"Livechat_title_color");i.color.set(a&&a.value);const n=h(i,"Livechat_show_agent_info");i.showAgentInfo.set(n&&n.value);const s=h(i,"Livechat_show_agent_email");i.showAgentEmail.set(s&&s.value);const l=h(i,"Livechat_display_offline_form");i.displayOfflineForm.set(l&&l.value);const o=h(i,"Livechat_offline_form_unavailable");i.offlineUnavailableMessage.set(o&&o.value);const r=h(i,"Livechat_offline_message");i.offlineMessage.set(r&&r.value);const c=h(i,"Livechat_offline_success_message");i.offlineSuccessMessage.set(c&&c.value);const f=h(i,"Livechat_offline_title");i.titleOffline.set(f&&f.value);const g=h(i,"Livechat_offline_title_color");i.colorOffline.set(g&&g.value);const _=h(i,"Livechat_conversation_finished_message");i.conversationFinishedMessage.set(_&&_.value);const v=h(i,"Livechat_conversation_finished_text");i.conversationFinishedText.set(v&&v.value);const m=h(i,"Livechat_registration_form");i.registrationFormEnabled.set(m&&m.value);const u=h(i,"Livechat_name_field_registration_form");i.registrationFormNameFieldEnabled.set(u&&u.value);const d=h(i,"Livechat_email_field_registration_form");i.registrationFormEmailFieldEnabled.set(d&&d.value);const F=h(i,"Livechat_registration_form_message");i.registrationFormMessage.set(F&&F.value)},"submit .rocket-form"(e,i){e.preventDefault();const t=[{_id:"Livechat_title",value:l.trim(i.title.get())},{_id:"Livechat_title_color",value:i.color.get()},{_id:"Livechat_show_agent_info",value:i.showAgentInfo.get()},{_id:"Livechat_show_agent_email",value:i.showAgentEmail.get()},{_id:"Livechat_display_offline_form",value:i.displayOfflineForm.get()},{_id:"Livechat_offline_form_unavailable",value:l.trim(i.offlineUnavailableMessage.get())},{_id:"Livechat_offline_message",value:l.trim(i.offlineMessage.get())},{_id:"Livechat_offline_success_message",value:l.trim(i.offlineSuccessMessage.get())},{_id:"Livechat_offline_title",value:l.trim(i.titleOffline.get())},{_id:"Livechat_offline_title_color",value:i.colorOffline.get()},{_id:"Livechat_offline_email",value:i.$("#emailOffline").val()},{_id:"Livechat_conversation_finished_message",value:l.trim(i.conversationFinishedMessage.get())},{_id:"Livechat_conversation_finished_text",value:l.trim(i.conversationFinishedText.get())},{_id:"Livechat_registration_form",value:i.registrationFormEnabled.get()},{_id:"Livechat_name_field_registration_form",value:i.registrationFormNameFieldEnabled.get()},{_id:"Livechat_email_field_registration_form",value:i.registrationFormEmailFieldEnabled.get()},{_id:"Livechat_registration_form_message",value:l.trim(i.registrationFormMessage.get())}];a.call("livechat:saveAppearance",t,e=>{if(e)return c(e);i.appearance.set(t),o.success(r("Settings_updated"))})}})}

