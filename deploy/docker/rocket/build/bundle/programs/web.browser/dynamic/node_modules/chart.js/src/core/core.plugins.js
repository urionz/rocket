function module(n,i,t){"use strict";var s=n("./core.defaults"),c=n("../helpers/index");s._set("global",{plugins:{}}),t.exports={_plugins:[],_cacheId:0,register:function(n){var i=this._plugins;[].concat(n).forEach((function(n){-1===i.indexOf(n)&&i.push(n)})),this._cacheId++},unregister:function(n){var i=this._plugins;[].concat(n).forEach((function(n){var t=i.indexOf(n);-1!==t&&i.splice(t,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(n,i,t){var s=this.descriptors(n),c=s.length,u,e,o,r,p;for(u=0;u<c;++u)if("function"==typeof(p=(o=(e=s[u]).plugin)[i])&&((r=[n].concat(t||[])).push(e.options),!1===p.apply(o,r)))return!1;return!0},descriptors:function(n){var i=n.$plugins||(n.$plugins={});if(i.id===this._cacheId)return i.descriptors;var t=[],u=[],e=n&&n.config||{},o=e.options&&e.options.plugins||{};return this._plugins.concat(e.plugins||[]).forEach((function(n){var i;if(-1===t.indexOf(n)){var e=n.id,r=o[e];!1!==r&&(!0===r&&(r=c.clone(s.global.plugins[e])),t.push(n),u.push({plugin:n,options:r||{}}))}})),i.descriptors=u,i.id=this._cacheId,u},_invalidate:function(n){delete n.$plugins}}}

