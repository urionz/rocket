{"version":3,"sources":["meteor://ðŸ’»app/packages/mizzao:timesync/server/index.js","meteor://ðŸ’»app/packages/mizzao:timesync/server/timesync-server.js"],"names":["module","link","WebApp","v","syncUrl","__meteor_runtime_config__","ROOT_URL_PATH_PREFIX","rawConnectHandlers","use","req","res","next","setHeader","end","Date","now","toString"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,IAAP,CAAY,mBAAZ,E;;;;;;;;;;;ACAA,IAAIC,MAAJ;AAAWF,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACC,QAAM,CAACC,CAAD,EAAG;AAACD,UAAM,GAACC,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AACX;AACA;AAEA,IAAIC,OAAO,GAAG,YAAd;;AACA,IAAIC,yBAAyB,CAACC,oBAA9B,EAAoD;AACnDF,SAAO,GAAGC,yBAAyB,CAACC,oBAA1B,GAAiDF,OAA3D;AACA;;AAEDF,MAAM,CAACK,kBAAP,CAA0BC,GAA1B,CAA8BJ,OAA9B,EACE,UAASK,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvB;AACA;AACAD,KAAG,CAACE,SAAJ,CAAc,eAAd,EAA+B,qCAA/B;AACAF,KAAG,CAACE,SAAJ,CAAc,QAAd,EAAwB,UAAxB;AACAF,KAAG,CAACE,SAAJ,CAAc,SAAd,EAAyB,CAAzB,EALuB,CAOvB;;AACAF,KAAG,CAACE,SAAJ,CAAc,cAAd,EAA8B,YAA9B;AAEAF,KAAG,CAACG,GAAJ,CAAQC,IAAI,CAACC,GAAL,GAAWC,QAAX,EAAR;AACD,CAZH,E","file":"/packages/mizzao_timesync.js","sourcesContent":["import './timesync-server';","import { WebApp } from 'meteor/webapp';\n// Use rawConnectHandlers so we get a response as quickly as possible\n// https://github.com/meteor/meteor/blob/devel/packages/webapp/webapp_server.js\n\nvar syncUrl = \"/_timesync\";\nif (__meteor_runtime_config__.ROOT_URL_PATH_PREFIX) {\n\tsyncUrl = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX + syncUrl;\n}\n\nWebApp.rawConnectHandlers.use(syncUrl,\n  function(req, res, next) {\n    // Never ever cache this, otherwise weird times are shown on reload\n    // http://stackoverflow.com/q/18811286/586086\n    res.setHeader(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");\n    res.setHeader(\"Pragma\", \"no-cache\");\n    res.setHeader(\"Expires\", 0);\n\n    // Avoid MIME type warnings in browsers\n    res.setHeader(\"Content-Type\", \"text/plain\");\n\n    res.end(Date.now().toString());\n  }\n);\n"]}