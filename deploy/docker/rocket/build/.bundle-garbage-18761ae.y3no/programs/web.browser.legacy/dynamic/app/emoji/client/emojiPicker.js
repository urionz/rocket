function module(e,t,r){var n,o,a,i,c,s,p,l;r.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){n=e}},0),r.export({updateRecentEmoji:function(){return k}}),r.link("underscore",{default:function(e){o=e}},0),r.link("meteor/reactive-var",{ReactiveVar:function(e){a=e}},1),r.link("meteor/reactive-dict",{ReactiveDict:function(e){i=e}},2),r.link("meteor/templating",{Template:function(e){c=e}},3),r.link("../../utils/client",{t:function(e){s=e}},4),r.link("./lib/EmojiPicker",{EmojiPicker:function(e){p=e}},5),r.link("../lib/rocketchat",{emoji:function(e){l=e}},6),r.link("./emojiPicker.html"),r.link("../../theme/client/imports/components/emojiPicker.css");var u=27,g=new i("emojiList"),m=function(e,t){return t&&'<li class="emoji-'+e+' emoji-picker-item" data-emoji="'+e+'" title="'+e+'">'+t+"</li>"},f=function(e,t){var r;return Object.values(l.packages).map((function(r){if(r.emojisByCategory&&r.emojisByCategory[e])return r.emojisByCategory[e].map((function(e){var n=t>0&&r.toneList.hasOwnProperty(e)?"_tone"+t:"";return m(e,r.renderPicker(":"+e+n+":"))})).join("")})).join("")||"<li>"+s("No_emojis_found")+"</li>"};function k(e){g.set(e,f(e))}var j=function(e){var t=e.categoriesList,r=e.tone;t.forEach((function(e){return g.set(e.key,f(e.key,r))}))};function y(e){var t='<ul class="emoji-list">',r,n=c.instance().tone;p.currentCategory.set("");var o=new RegExp(RegExp.escape(e.replace(/:/g,"")),"i");for(var a in meteorBabelHelpers.sanitizeForInObject(l.list))if(l.list.hasOwnProperty(a)&&o.test(a)){var i,s=l.list[a].emojiPackage,u="";a=a.replace(/:/g,""),n>0&&l.packages[s].toneList.hasOwnProperty(l)&&(u="_tone"+n);var g=!1;for(var f in meteorBabelHelpers.sanitizeForInObject(l.packages[s].emojisByCategory)){var k;if(l.packages[s].emojisByCategory.hasOwnProperty(f))if(-1!==l.packages[s].emojisByCategory[f].indexOf(a)){g=!0;break}}if(g){var j=l.packages[s].renderPicker(":"+a+u+":");t+=m(a,j)}}return t+="</ul>"}c.emojiPicker.helpers({emojiCategories:function(){return c.instance().categoriesList},emojiByCategory:function(e){var t=[];for(var r in meteorBabelHelpers.sanitizeForInObject(l.packages))l.packages.hasOwnProperty(r)&&l.packages[r].emojisByCategory.hasOwnProperty(e)&&(t=t.concat(l.packages[r].emojisByCategory[e]));return t},searching:function(){return c.instance().currentSearchTerm.get().length>0},searchResults:function(){return y(c.instance().currentSearchTerm.get())},emojiList:function(e){return g.get(e)},currentTone:function(){return"tone-"+c.instance().tone},activeCategory:function(e){return p.currentCategory.get()===e?"active":""},currentCategory:function(){return p.currentCategory.get()}}),c.emojiPicker.events({"click .emoji-picker":function(e){e.stopPropagation(),e.preventDefault()},"click .category-link":function(e){return e.stopPropagation(),e.preventDefault(),p.showCategory(e.currentTarget.hash.substr(1)),!1},"scroll .emojis":o.throttle((function(e,t){if(!p.scrollingToCategory){var r,n=t.$(e.currentTarget).scrollTop()+8,o=p.getCategoryPositions().filter((function(e){return e.top<=n})).pop();if(o){var a,i=o.el.id.replace("emoji-list-category-","");p.currentCategory.set(i)}}}),300),"click .change-tone > a":function(e,t){e.stopPropagation(),e.preventDefault(),t.$(".tone-selector").toggleClass("show")},"click .tone-selector .tone":function(e,t){e.stopPropagation(),e.preventDefault();var r=parseInt(e.currentTarget.dataset.tone),n;for(var o in n=r>0?"_tone"+r:"",meteorBabelHelpers.sanitizeForInObject(l.packages))if(l.packages.hasOwnProperty(o)&&l.packages[o].hasOwnProperty("toneList"))for(var a in meteorBabelHelpers.sanitizeForInObject(l.packages[o].toneList))l.packages[o].toneList.hasOwnProperty(a)&&$(".emoji-"+a).html(l.packages[o].render(":"+a+n+":"));p.setTone(r),t.setCurrentTone(r),$(".tone-selector").toggleClass("show")},"click .emoji-list .emoji-picker-item":function(e,t){e.stopPropagation();var r=e.currentTarget.dataset.emoji,n=t.tone,o="";for(var a in meteorBabelHelpers.sanitizeForInObject(l.packages))l.packages.hasOwnProperty(a)&&n>0&&l.packages[a].toneList.hasOwnProperty(r)&&(o="_tone"+n);var i=$(".emoji-picker .js-emojipicker-search");i&&i.val(""),t.currentSearchTerm.set(""),p.pickEmoji(r+o)},"keyup .js-emojipicker-search, change .js-emojipicker-search":function(e,t){if(e.preventDefault(),e.stopPropagation(),27===e.keyCode)return p.close();var r=e.target.value.trim(),n=t.currentSearchTerm;r!==n.get()&&n.set(r)}}),c.emojiPicker.onCreated((function(){var e=this;this.tone=p.getTone();var t=p.getRecent();for(var r in this.currentSearchTerm=new a(""),this.categoriesList=[],meteorBabelHelpers.sanitizeForInObject(l.packages)){var o;if(l.packages.hasOwnProperty(r))if(l.packages[r].emojiCategories)if(void 0!==l.packages[r].categoryIndex)(o=this.categoriesList).splice.apply(o,[l.packages[r].categoryIndex,0].concat(n(l.packages[r].emojiCategories)));else this.categoriesList=this.categoriesList.concat(l.packages[r].emojiCategories)}t.forEach((function(e){l.packages.base.emojisByCategory.recent.push(e)})),this.setCurrentTone=function(t){$(".current-tone").removeClass("tone-"+e.tone),$(".current-tone").addClass("tone-"+t),e.tone=t},j(this)}))}

