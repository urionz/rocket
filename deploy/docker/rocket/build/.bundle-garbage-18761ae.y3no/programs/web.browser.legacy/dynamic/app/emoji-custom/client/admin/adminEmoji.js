function module(t,e,n){var i,o,a,r,s,u,c,f,l,m;n.link("@babel/runtime/regenerator",{default:function(t){i=t}},0),n.link("meteor/reactive-var",{ReactiveVar:function(t){o=t}},0),n.link("meteor/tracker",{Tracker:function(t){a=t}},1),n.link("meteor/kadira:flow-router",{FlowRouter:function(t){r=t}},2),n.link("meteor/templating",{Template:function(t){s=t}},3),n.link("underscore",{default:function(t){u=t}},4),n.link("../../../ui-utils",{RocketChatTabBar:function(t){c=t},SideNav:function(t){f=t},TabBar:function(t){l=t}},5),n.link("../../../utils/client",{APIClient:function(t){m=t}},6);var d=50,g=500;s.adminEmoji.helpers({searchText:function(){var t=s.instance();return t.filter&&t.filter.get()},customemoji:function(){return s.instance().emojis.get()},isLoading:function(){return s.instance().isLoading.get()},flexData:function(){return{tabBar:s.instance().tabBar,data:s.instance().tabBarData.get()}},onTableScroll:function(){var t=s.instance();return function(e){if(!(e.offsetHeight+e.scrollTop<e.scrollHeight-100)){var n=t.emojis.get();t.total.get()>n.length&&t.offset.set(t.offset.get()+d)}}},onTableItemClick:function(){var t=s.instance();return function(e){var n=e._id;t.tabBarData.set({emoji:t.emojis.get().find((function(t){return t._id===n})),onSuccess:t.onSuccessCallback}),t.tabBar.open("admin-emoji-info")}}}),s.adminEmoji.onCreated(function(){function t(){var t=this,e;return i.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:e=this,this.emojis=new o([]),this.offset=new o(0),this.total=new o(0),this.filter=new o(""),this.query=new o({}),this.isLoading=new o(!1),this.tabBar=new c,this.tabBar.showGroup(r.current().route.name),this.tabBarData=new o,l.addButton({groups:["emoji-custom"],id:"add-emoji",i18nTitle:"Custom_Emoji_Add",icon:"plus",template:"adminEmojiEdit",order:1}),l.addButton({groups:["emoji-custom"],id:"admin-emoji-info",i18nTitle:"Custom_Emoji_Info",icon:"customize",template:"adminEmojiInfo",order:2}),this.onSuccessCallback=function(){return t.offset.set(0),t.loadEmojis(t.query.get(),t.offset.get())},this.tabBarData.set({onSuccess:e.onSuccessCallback}),this.loadEmojis=u.debounce(function(){function e(e,n){var o,a,r;return i.async(function(){function s(s){for(;;)switch(s.prev=s.next){case 0:return t.isLoading.set(!0),s.next=3,i.awrap(m.v1.get("emoji-custom.all?count="+d+"&offset="+n+"&query="+JSON.stringify(e)));case 3:o=s.sent,a=o.emojis,r=o.total,t.total.set(r),0===n?t.emojis.set(a):t.emojis.set(t.emojis.get().concat(a)),t.isLoading.set(!1);case 9:case"end":return s.stop()}}return s}())}return e}(),g),this.autorun((function(){t.filter.get(),t.offset.set(0)})),this.autorun((function(){var e=t.filter.get()&&t.filter.get().trim(),n=t.offset.get();if(e){var i={$regex:e,$options:"i"};return t.loadEmojis({$or:[{name:i},{aliases:i}]},n)}return t.loadEmojis({},n)}));case 17:case"end":return n.stop()}}return n}(),null,this)}return t}()),s.adminEmoji.onRendered((function(){return a.afterFlush((function(){f.setFlex("adminFlex"),f.openFlex()}))})),s.adminEmoji.events({"keydown #emoji-filter":function(t){13===t.which&&(t.stopPropagation(),t.preventDefault())},"keyup #emoji-filter":function(t,e){t.stopPropagation(),t.preventDefault(),e.filter.set(t.currentTarget.value)}})}

