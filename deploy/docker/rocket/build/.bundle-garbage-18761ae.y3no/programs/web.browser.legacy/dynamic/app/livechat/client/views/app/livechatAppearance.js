function module(e,t,i){var n,a,s,l,r,o,c,f,u;i.link("@babel/runtime/regenerator",{default:function(e){n=e}},0),i.link("meteor/meteor",{Meteor:function(e){a=e}},0),i.link("meteor/reactive-var",{ReactiveVar:function(e){s=e}},1),i.link("meteor/templating",{Template:function(e){l=e}},2),i.link("underscore.string",{default:function(e){r=e}},3),i.link("toastr",{default:function(e){o=e}},4),i.link("../../../../utils",{t:function(e){c=e},handleError:function(e){f=e}},5),i.link("./livechatAppearance.html"),i.link("../../../../utils/client",{APIClient:function(e){u=e}},6);var h=function(e,t){return e.appearance.get()&&e.appearance.get().find((function(e){return e._id===t}))};l.livechatAppearance.helpers({color:function(){return l.instance().color.get()},showAgentInfo:function(){return l.instance().showAgentInfo.get()},showAgentEmail:function(){return l.instance().showAgentEmail.get()},title:function(){return l.instance().title.get()},colorOffline:function(){return l.instance().colorOffline.get()},titleOffline:function(){return l.instance().titleOffline.get()},offlineMessage:function(){return l.instance().offlineMessage.get()},sampleOfflineMessage:function(){return l.instance().offlineMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},offlineSuccessMessage:function(){return l.instance().offlineSuccessMessage.get()},sampleOfflineSuccessMessage:function(){return l.instance().offlineSuccessMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},showAgentInfoFormTrueChecked:function(){if(l.instance().showAgentInfo.get())return"checked"},showAgentInfoFormFalseChecked:function(){if(!l.instance().showAgentInfo.get())return"checked"},showAgentEmailFormTrueChecked:function(){if(l.instance().showAgentEmail.get())return"checked"},showAgentEmailFormFalseChecked:function(){if(!l.instance().showAgentEmail.get())return"checked"},displayOfflineFormTrueChecked:function(){if(l.instance().displayOfflineForm.get())return"checked"},displayOfflineFormFalseChecked:function(){if(!l.instance().displayOfflineForm.get())return"checked"},offlineUnavailableMessage:function(){return l.instance().offlineUnavailableMessage.get()},sampleOfflineUnavailableMessage:function(){return l.instance().offlineUnavailableMessage.get().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},emailOffline:function(){return l.instance().offlineEmail.get()},conversationFinishedMessage:function(){return l.instance().conversationFinishedMessage.get()},conversationFinishedText:function(){return l.instance().conversationFinishedText.get()},registrationFormEnabled:function(){if(l.instance().registrationFormEnabled.get())return"checked"},registrationFormNameFieldEnabled:function(){if(l.instance().registrationFormNameFieldEnabled.get())return"checked"},registrationFormEmailFieldEnabled:function(){if(l.instance().registrationFormEmailFieldEnabled.get())return"checked"},registrationFormMessage:function(){return l.instance().registrationFormMessage.get()}}),l.livechatAppearance.onCreated(function(){function e(){var e,t,i,a,l,r,o,c,f,g,v,_,m,d,F,p,L,w,E;return n.async(function(){function M(M){for(;;)switch(M.prev=M.next){case 0:return this.appearance=new s([]),this.title=new s(null),this.color=new s(null),this.showAgentInfo=new s(null),this.showAgentEmail=new s(null),this.displayOfflineForm=new s(null),this.offlineUnavailableMessage=new s(null),this.offlineMessage=new s(null),this.offlineSuccessMessage=new s(null),this.titleOffline=new s(null),this.colorOffline=new s(null),this.offlineEmail=new s(null),this.conversationFinishedMessage=new s(null),this.conversationFinishedText=new s(null),this.registrationFormEnabled=new s(null),this.registrationFormNameFieldEnabled=new s(null),this.registrationFormEmailFieldEnabled=new s(null),this.registrationFormMessage=new s(null),M.next=20,n.awrap(u.v1.get("livechat/appearance"));case 20:e=M.sent,t=e.appearance,this.appearance.set(t),i=h(this,"Livechat_title"),a=h(this,"Livechat_title_color"),l=h(this,"Livechat_show_agent_info"),r=h(this,"Livechat_show_agent_email"),o=h(this,"Livechat_display_offline_form"),c=h(this,"Livechat_offline_form_unavailable"),f=h(this,"Livechat_offline_message"),g=h(this,"Livechat_offline_success_message"),v=h(this,"Livechat_offline_title"),_=h(this,"Livechat_offline_title_color"),m=h(this,"Livechat_offline_email"),d=h(this,"Livechat_conversation_finished_message"),F=h(this,"Livechat_registration_form_message"),p=h(this,"Livechat_registration_form"),L=h(this,"Livechat_name_field_registration_form"),w=h(this,"Livechat_email_field_registration_form"),E=h(this,"Livechat_conversation_finished_text"),this.title.set(i&&i.value),this.color.set(a&&a.value),this.showAgentInfo.set(l&&l.value),this.showAgentEmail.set(r&&r.value),this.displayOfflineForm.set(o&&o.value),this.offlineUnavailableMessage.set(c&&c.value),this.offlineMessage.set(f&&f.value),this.offlineSuccessMessage.set(g&&g.value),this.titleOffline.set(v&&v.value),this.colorOffline.set(_&&_.value),this.offlineEmail.set(m&&m.value),this.conversationFinishedMessage.set(d&&d.value),this.registrationFormMessage.set(F&&F.value),this.registrationFormEnabled.set(p&&p.value),this.registrationFormNameFieldEnabled.set(L&&L.value),this.registrationFormEmailFieldEnabled.set(w&&w.value),this.conversationFinishedText.set(E&&E.value);case 57:case"end":return M.stop()}}return M}(),null,this)}return e}()),l.livechatAppearance.events({"change .js-input-check":function(e,t){t[e.currentTarget.name].set(e.currentTarget.checked)},"change .preview-settings, keyup .preview-settings":function(e,t){var i=e.currentTarget.value;"radio"===e.currentTarget.type&&(i="true"===i),t[e.currentTarget.name].set(i)},"click .reset-settings":function(e,t){e.preventDefault();var i=h(t,"Livechat_title");t.title.set(i&&i.value);var n=h(t,"Livechat_title_color");t.color.set(n&&n.value);var a=h(t,"Livechat_show_agent_info");t.showAgentInfo.set(a&&a.value);var s=h(t,"Livechat_show_agent_email");t.showAgentEmail.set(s&&s.value);var l=h(t,"Livechat_display_offline_form");t.displayOfflineForm.set(l&&l.value);var r=h(t,"Livechat_offline_form_unavailable");t.offlineUnavailableMessage.set(r&&r.value);var o=h(t,"Livechat_offline_message");t.offlineMessage.set(o&&o.value);var c=h(t,"Livechat_offline_success_message");t.offlineSuccessMessage.set(c&&c.value);var f=h(t,"Livechat_offline_title");t.titleOffline.set(f&&f.value);var u=h(t,"Livechat_offline_title_color");t.colorOffline.set(u&&u.value);var g=h(t,"Livechat_conversation_finished_message");t.conversationFinishedMessage.set(g&&g.value);var v=h(t,"Livechat_conversation_finished_text");t.conversationFinishedText.set(v&&v.value);var _=h(t,"Livechat_registration_form");t.registrationFormEnabled.set(_&&_.value);var m=h(t,"Livechat_name_field_registration_form");t.registrationFormNameFieldEnabled.set(m&&m.value);var d=h(t,"Livechat_email_field_registration_form");t.registrationFormEmailFieldEnabled.set(d&&d.value);var F=h(t,"Livechat_registration_form_message");t.registrationFormMessage.set(F&&F.value)},"submit .rocket-form":function(e,t){e.preventDefault();var i=[{_id:"Livechat_title",value:r.trim(t.title.get())},{_id:"Livechat_title_color",value:t.color.get()},{_id:"Livechat_show_agent_info",value:t.showAgentInfo.get()},{_id:"Livechat_show_agent_email",value:t.showAgentEmail.get()},{_id:"Livechat_display_offline_form",value:t.displayOfflineForm.get()},{_id:"Livechat_offline_form_unavailable",value:r.trim(t.offlineUnavailableMessage.get())},{_id:"Livechat_offline_message",value:r.trim(t.offlineMessage.get())},{_id:"Livechat_offline_success_message",value:r.trim(t.offlineSuccessMessage.get())},{_id:"Livechat_offline_title",value:r.trim(t.titleOffline.get())},{_id:"Livechat_offline_title_color",value:t.colorOffline.get()},{_id:"Livechat_offline_email",value:t.$("#emailOffline").val()},{_id:"Livechat_conversation_finished_message",value:r.trim(t.conversationFinishedMessage.get())},{_id:"Livechat_conversation_finished_text",value:r.trim(t.conversationFinishedText.get())},{_id:"Livechat_registration_form",value:t.registrationFormEnabled.get()},{_id:"Livechat_name_field_registration_form",value:t.registrationFormNameFieldEnabled.get()},{_id:"Livechat_email_field_registration_form",value:t.registrationFormEmailFieldEnabled.get()},{_id:"Livechat_registration_form_message",value:r.trim(t.registrationFormMessage.get())}];a.call("livechat:saveAppearance",i,(function(e){if(e)return f(e);t.appearance.set(i),o.success(c("Settings_updated"))}))}})}

