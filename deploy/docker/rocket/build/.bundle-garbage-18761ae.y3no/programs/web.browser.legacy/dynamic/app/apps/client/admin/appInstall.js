function module(e,n,t){var a,r,i,s,p,l,u,c,o;function d(e){if(e.xhr&&e.xhr.responseJSON){var n=e.xhr.responseJSON,t=n.status,a=n.messages,r=n.error,i=n.payload,s=void 0===i?null:i,p;switch(t){case"storage_error":p=a.join("");break;case"compiler_error":p="There has been compiler errors. App cannot be installed";break;case"app_user_error":p=a.join(""),s&&s.username&&(p=l.__("Apps_User_Already_Exists",{username:s.username}));break;default:p=r||"There has been an error installing the app"}u.error(p)}}t.link("@babel/runtime/regenerator",{default:function(e){a=e}},0),t.link("meteor/reactive-var",{ReactiveVar:function(e){r=e}},0),t.link("meteor/kadira:flow-router",{FlowRouter:function(e){i=e}},1),t.link("meteor/templating",{Template:function(e){s=e}},2),t.link("meteor/tracker",{Tracker:function(e){p=e}},3),t.link("meteor/rocketchat:tap-i18n",{TAPi18n:function(e){l=e}},4),t.link("toastr",{default:function(e){u=e}},5),t.link("../../../utils",{APIClient:function(e){c=e}},6),t.link("../../../ui-utils/client",{SideNav:function(e){o=e}},7),s.appInstall.helpers({appFile:function(){return s.instance().file.get()},isInstalling:function(){return s.instance().isInstalling.get()},appUrl:function(){return s.instance().appUrl.get()},disabled:function(){var e=s.instance();return!(e.appUrl.get()||e.file.get())},isUpdating:function(){var e;return!!s.instance().isUpdatingId.get()}}),s.appInstall.onCreated((function(){var e=this;this.file=new r(""),this.isInstalling=new r(!1),this.appUrl=new r(""),this.isUpdatingId=new r(""),i.getQueryParam("url")&&(this.appUrl.set(i.getQueryParam("url")),i.setQueryParams({url:null})),i.getQueryParam("isUpdatingId")&&this.isUpdatingId.set(i.getQueryParam("isUpdatingId"))})),s.appInstall.events({"input #appPackage":function(e,n){n.appUrl.set(e.currentTarget.value)},"change #upload-app":function(e,n){var t=e.currentTarget.files[0];n.file.set(t.name)},"click .js-cancel":function(){i.go("/admin/apps")},"click .js-install":function(){function e(e,n){var t,r,s,p,l,u,o,f,g;return a.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=$("#appPackage").val().trim())){e.next=22;break}if(e.prev=2,n.isInstalling.set(!0),!(r=n.isUpdatingId.get())){e.next=11;break}return e.next=8,a.awrap(c.post("apps/"+n.isUpdatingId.get(),{url:t}));case 8:s=e.sent,e.next=14;break;case 11:return e.next=13,a.awrap(c.post("apps",{url:t}));case 13:s=e.sent;case 14:i.go("/admin/apps/"+s.app.id),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),d(e.t0);case 20:return n.isInstalling.set(!1),e.abrupt("return");case 22:if((p=$("#upload-app")[0].files)instanceof FileList){e.next=25;break}return e.abrupt("return");case 25:for(l=new FormData,u=0;u<p.length;u++)"application/zip"===(o=p[0]).type&&l.append("app",o,o.name);if(l.has("app")){e.next=29;break}return e.abrupt("return");case 29:if(n.isInstalling.set(!0),e.prev=30,!(f=n.isUpdatingId.get())){e.next=38;break}return e.next=35,a.awrap(c.upload("apps/"+n.isUpdatingId.get(),l));case 35:g=e.sent,e.next=41;break;case 38:return e.next=40,a.awrap(c.upload("apps",l));case 40:g=e.sent;case 41:i.go("/admin/apps/"+g.app.id+"?version="+g.app.version),e.next=47;break;case 44:e.prev=44,e.t1=e.catch(30),d(e.t1);case 47:n.isInstalling.set(!1);case 48:case"end":return e.stop()}}return e}(),null,null,[[2,17],[30,44]])}return e}()}),s.appInstall.onRendered((function(){p.afterFlush((function(){o.setFlex("adminFlex"),o.openFlex()}))}))}

