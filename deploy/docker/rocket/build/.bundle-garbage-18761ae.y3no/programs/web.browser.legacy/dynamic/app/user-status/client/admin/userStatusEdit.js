function module(t,e,s){var a,n,u,r,i,c,l;s.link("toastr",{default:function(t){a=t}},0),s.link("underscore.string",{default:function(t){n=t}},1),s.link("meteor/meteor",{Meteor:function(t){u=t}},2),s.link("meteor/templating",{Template:function(t){r=t}},3),s.link("meteor/rocketchat:tap-i18n",{TAPi18n:function(t){i=t}},4),s.link("../../../utils",{t:function(t){c=t},handleError:function(t){l=t}},5),r.userStatusEdit.helpers({userStatus:function(){return r.instance().userStatus},options:function(){var t=this.userStatus?this.userStatus.statusType:"";return[{value:"online",name:c("Online"),selected:"online"===t?"selected":""},{value:"away",name:c("Away"),selected:"away"===t?"selected":""},{value:"busy",name:c("Busy"),selected:"busy"===t?"selected":""},{value:"offline",name:c("Invisible"),selected:"offline"===t?"selected":""}]}}),r.userStatusEdit.events({"click .cancel":function(t,e){t.stopPropagation(),t.preventDefault(),e.cancel(e.find("form"))},"submit form":function(t,e){t.stopPropagation(),t.preventDefault(),e.save(t.currentTarget)}}),r.userStatusEdit.onCreated((function(){var t=this;null!=this.data?this.userStatus=this.data.userStatus:this.userStatus=void 0,this.tabBar=r.currentData().tabBar,this.onSuccess=r.currentData().onSuccess,this.cancel=function(e,s){e.reset(),t.tabBar.close(),t.userStatus&&t.data.back(s)},this.getUserStatusData=function(){var e={};return null!=t.userStatus&&(e._id=t.userStatus._id,e.previousName=t.userStatus.name),e.name=n.trim(t.$("#name").val()),e.statusType=n.trim(t.$("#statusType").val()),e},this.validate=function(){var e,s=[];t.getUserStatusData().name||s.push("Name");for(var n=0,u=s;n<u.length;n++){var r=u[n];a.error(i.__("error-the-field-is-required",{field:i.__(r)}))}return 0===s.length},this.save=function(e){if(t.validate()){var s=t.getUserStatusData();u.call("insertOrUpdateUserStatus",s,(function(n,u){u&&(s._id?a.success(c("Custom_User_Status_Updated_Successfully")):a.success(c("Custom_User_Status_Added_Successfully")),t.onSuccess(),t.cancel(e,s.name)),n&&l(n)}))}}}))}

