function module(e,t,n){let a,s,i,r,c,o,f,u,l,h;n.link("meteor/meteor",{Meteor(e){a=e}},0),n.link("meteor/reactive-var",{ReactiveVar(e){s=e}},1),n.link("meteor/templating",{Template(e){i=e}},2),n.link("meteor/rocketchat:tap-i18n",{TAPi18n(e){r=e}},3),n.link("toastr",{default(e){c=e}},4),n.link("moment",{default(e){o=e}},5),n.link("../../../../utils/client",{t(e){f=e},handleError(e){u=e},APIClient(e){l=e}},6),n.link("../../../../settings",{settings(e){h=e}},7),n.link("./livechatOfficeHours.html"),i.livechatOfficeHours.helpers({days:()=>i.instance().officeHours.get(),startName:e=>"".concat(e.day,"_start"),finishName:e=>"".concat(e.day,"_finish"),openName:e=>"".concat(e.day,"_open"),start:e=>i.instance().dayVars[e.day].start.get(),finish:e=>i.instance().dayVars[e.day].finish.get(),name:e=>r.__(e.day),open:e=>i.instance().dayVars[e.day].open.get(),enableOfficeHoursTrueChecked(){if(i.instance().enableOfficeHours.get())return"checked"},enableOfficeHoursFalseChecked(){if(!i.instance().enableOfficeHours.get())return"checked"},allowAgentsOnlineOutOfficeHoursTrueChecked(){if(i.instance().allowAgentsOnlineOutOfficeHours.get())return"checked"},allowAgentsOnlineOutOfficeHoursFalseChecked(){if(!i.instance().allowAgentsOnlineOutOfficeHours.get())return"checked"}}),i.livechatOfficeHours.events({"change .preview-settings, keydown .preview-settings"(e,t){const n=e.currentTarget.name.split("_"),a=o(e.currentTarget.value,"HH:mm");"start"===n[1]?a.isSameOrBefore(o(t.dayVars[n[0]].finish.get(),"HH:mm"))?t.dayVars[n[0]].start.set(e.currentTarget.value):e.currentTarget.value=t.dayVars[n[0]].start.get():"finish"===n[1]&&(a.isSameOrAfter(o(t.dayVars[n[0]].start.get(),"HH:mm"))?t.dayVars[n[0]].finish.set(e.currentTarget.value):e.currentTarget.value=t.dayVars[n[0]].finish.get())},"change .dayOpenCheck input"(e,t){const n=e.currentTarget.name.split("_");t.dayVars[n[0]][n[1]].set(e.target.checked)},"change .preview-settings, keyup .preview-settings"(e,t){let{value:n}=e.currentTarget;"radio"===e.currentTarget.type&&(n="true"===n,t[e.currentTarget.name].set(n))},"submit .rocket-form"(e,t){e.preventDefault();for(const n in t.dayVars)if(t.dayVars.hasOwnProperty(n)){const e=t.dayVars[n],s=o(e.start.get(),"HH:mm").utc().format("HH:mm"),i=o(e.finish.get(),"HH:mm").utc().format("HH:mm");a.call("livechat:saveOfficeHours",n,s,i,e.open.get(),(function(e){if(e)return u(e)}))}h.set("Livechat_allow_online_agents_outside_office_hours",t.allowAgentsOnlineOutOfficeHours.get()),h.set("Livechat_enable_office_hours",t.enableOfficeHours.get(),e=>{if(e)return u(e);c.success(f("Office_hours_updated"))})}}),i.livechatOfficeHours.onCreated((async function(){this.dayVars={Monday:{start:new s("08:00"),finish:new s("20:00"),open:new s(!0)},Tuesday:{start:new s("00:00"),finish:new s("00:00"),open:new s(!0)},Wednesday:{start:new s("00:00"),finish:new s("00:00"),open:new s(!0)},Thursday:{start:new s("00:00"),finish:new s("00:00"),open:new s(!0)},Friday:{start:new s("00:00"),finish:new s("00:00"),open:new s(!0)},Saturday:{start:new s("00:00"),finish:new s("00:00"),open:new s(!1)},Sunday:{start:new s("00:00"),finish:new s("00:00"),open:new s(!1)}},this.officeHours=new s([]),this.enableOfficeHours=new s,this.allowAgentsOnlineOutOfficeHours=new s;const{officeHours:e}=await l.v1.get("livechat/office-hours");this.officeHours.set(e),e.forEach(e=>{this.dayVars[e.day].start.set(o.utc(e.start,"HH:mm").local().format("HH:mm")),this.dayVars[e.day].finish.set(o.utc(e.finish,"HH:mm").local().format("HH:mm")),this.dayVars[e.day].open.set(e.open)}),this.autorun(()=>{this.enableOfficeHours.set(h.get("Livechat_enable_office_hours")),this.allowAgentsOnlineOutOfficeHours.set(h.get("Livechat_allow_online_agents_outside_office_hours"))})}))}

