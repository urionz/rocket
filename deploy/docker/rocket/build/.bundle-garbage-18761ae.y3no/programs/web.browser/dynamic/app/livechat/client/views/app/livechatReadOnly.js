function module(i,t,e){let n,r,a,o,s,l,u,c;e.link("meteor/meteor",{Meteor(i){n=i}},0),e.link("meteor/templating",{Template(i){r=i}},1),e.link("meteor/reactive-var",{ReactiveVar(i){a=i}},2),e.link("meteor/kadira:flow-router",{FlowRouter(i){o=i}},3),e.link("../../../../models",{ChatRoom(i){s=i}},4),e.link("../../../../ui-utils/client",{call(i){l=i}},5),e.link("./livechatReadOnly.html"),e.link("../../../../utils/client",{APIClient(i){u=i}},6),e.link("../../lib/stream/inquiry",{inquiryDataStream(i){c=i}},7),r.livechatReadOnly.helpers({inquiryOpen(){const i=r.instance().inquiry.get();return i&&"queued"===i.status||o.go("/home")},roomOpen(){const i=r.instance().room.get();return i&&!0===i.open},showPreview(){const i=r.instance().routingConfig.get();return i.previewRoom},isPreparing:()=>r.instance().preparing.get()}),r.livechatReadOnly.events({async"click .js-take-it"(i,t){i.preventDefault(),i.stopPropagation();const e=t.inquiry.get(),{_id:n}=e;await l("livechat:takeInquiry",n),t.loadInquiry(e.rid)}}),r.livechatReadOnly.onCreated((function(){this.rid=r.currentData().rid,this.room=new a,this.inquiry=new a,this.routingConfig=new a({}),this.preparing=new a(!0),this.updateInquiry=i=>{this.inquiry.set(i)},n.call("livechat:getRoutingConfig",(i,t)=>{t&&this.routingConfig.set(t)}),this.loadInquiry=async i=>{this.preparing.set(!0);const{inquiry:t}=await u.v1.get("livechat/inquiries.getOne?roomId=".concat(i));this.inquiry.set(t),t&&t._id&&c.on(t._id,this.updateInquiry),this.preparing.set(!1)},this.autorun(()=>this.loadInquiry(this.rid)),this.autorun(()=>{this.room.set(s.findOne({_id:r.currentData().rid},{fields:{open:1}}))})})),r.livechatReadOnly.onDestroyed((function(){const i=this.inquiry.get();i&&i._id&&c.removeListener(i._id,this.updateInquiry)}))}

