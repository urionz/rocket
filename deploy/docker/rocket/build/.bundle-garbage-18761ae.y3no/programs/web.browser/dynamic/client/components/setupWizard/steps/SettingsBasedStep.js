function module(e,t,l){let a,n,r,u,i,s,c,o,d,p,m,g,v,E,k,S,b,f,y,h,x,T,F;l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){a=e}},0),l.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},1),l.export({SettingsBasedStep:()=>w}),l.link("@rocket.chat/fuselage",{Field(e){r=e},FieldGroup(e){u=e},Flex(e){i=e},InputBox(e){s=e},Margins(e){c=e},SelectInput(e){o=e},Skeleton(e){d=e},TextInput(e){p=e}},0),l.link("react",{default(e){m=e},useEffect(e){g=e},useReducer(e){v=e},useState(e){E=e}},1),l.link("../../../contexts/SettingsContext",{useBatchSettingsDispatch(e){k=e}},2),l.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){S=e}},3),l.link("../../../contexts/TranslationContext",{useTranslation(e){b=e},useLanguages(e){f=e}},4),l.link("../../../hooks/useFocus",{useFocus(e){y=e}},5),l.link("../Pager",{Pager(e){h=e}},6),l.link("../SetupWizardState",{useSetupWizardContext(e){x=e}},7),l.link("../Step",{Step(e){T=e}},8),l.link("../StepHeader",{StepHeader(e){F=e}},9);const _=()=>{const e="RESET",t="SET_VALUE",[l,a]=v((l,a)=>{let{type:r,payload:u}=a;if(r===e)return u;if(r===t){const{_id:e,value:t}=u;return l.map(l=>l._id===e?n({},l,{value:t}):l)}return l},[]),r=t=>a({type:e,payload:t}),u=(e,l)=>a({type:t,payload:{_id:e,value:l}});return{fields:l,resetFields:r,setFieldValue:u}};function w(e){let{step:t,title:l,active:v}=e;const{settings:w,currentStep:C,goToPreviousStep:L,goToNextStep:z}=x(),{fields:B,resetFields:D,setFieldValue:I}=_(),[P,j]=E(!1),q=f();g(()=>{D(w.filter(e=>{let{wizard:l}=e;return l.step===t}).filter(e=>{let{type:t}=e;return["string","select","language"].includes(t)}).sort((e,t)=>{let{wizard:{order:l}}=e,{wizard:{order:a}}=t;return l-a}).map(e=>{let{value:t}=e,l=a(e,["value"]);return n({},l,{value:t||""})}))},[w,C]);const M=b(),O=k(),R=y(v),V=S(),W=()=>{L()},A=async e=>{e.preventDefault(),j(!0);try{await O(B.map(e=>{let{_id:t,value:l}=e;return{_id:t,value:l}})),z()}catch(t){V({type:"error",message:t})}finally{j(!1)}};return 0===B.length?m.createElement(T,{active:v,working:P,onSubmit:A},m.createElement(F,{number:t,title:l}),m.createElement(c,{blockEnd:"x32"},m.createElement(u,null,Array.from({length:5},(e,t)=>m.createElement(r,{key:t},m.createElement(i.Item,{align:"stretch"},m.createElement(r.Label,null,m.createElement(d,{width:"50%"}))),m.createElement(s.Skeleton,null)))))):m.createElement(T,{active:v,working:P,onSubmit:A},m.createElement(F,{number:t,title:l}),m.createElement(c,{blockEnd:"x32"},m.createElement(u,null,B.map((e,t)=>{let{_id:l,type:a,i18nLabel:n,value:u,values:i}=e;return m.createElement(r,{key:t},m.createElement(r.Label,{htmlFor:l},M(n)),m.createElement(r.Row,null,"string"===a&&m.createElement(p,{type:"text","data-qa":l,id:l,name:l,ref:0===t?R:void 0,value:u,onChange:e=>{let{currentTarget:{value:t}}=e;return I(l,t)}}),"select"===a&&m.createElement(o,{type:"select","data-qa":l,id:l,name:l,placeholder:M("Select_an_option"),ref:0===t?R:void 0,value:u,onChange:e=>{let{currentTarget:{value:t}}=e;return I(l,t)}},i.map(e=>{let{i18nLabel:t,key:l}=e;return{label:M(t),value:l}}).map(e=>{let{label:t,value:l}=e;return m.createElement(o.Option,{key:l,value:l},t)})),"language"===a&&m.createElement(o,{type:"select","data-qa":l,id:l,name:l,placeholder:M("Default"),ref:0===t?R:void 0,value:u,onChange:e=>{let{currentTarget:{value:t}}=e;return I(l,t)}},Object.entries(q).map(e=>{let[t,{name:l}]=e;return{label:l,value:t}}).sort((e,t)=>e.value-t.value).map(e=>{let{label:t,value:l}=e;return m.createElement(o.Option,{key:l,value:l,dir:"auto"},t)}))))}))),m.createElement(h,{disabled:P,onBackClick:C>2&&W}))}}

