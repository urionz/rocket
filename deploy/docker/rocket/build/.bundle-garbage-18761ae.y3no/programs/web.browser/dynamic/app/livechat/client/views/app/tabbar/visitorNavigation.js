function module(t,i,e){let s,n,o,a,l,r,c;e.link("meteor/reactive-var",{ReactiveVar(t){s=t}},0),e.link("meteor/templating",{Template(t){n=t}},1),e.link("moment",{default(t){o=t}},2),e.link("underscore",{default(t){a=t}},3),e.link("../../../../../models",{ChatRoom(t){l=t}},4),e.link("../../../../../utils",{t(t){r=t}},5),e.link("./visitorNavigation.html"),e.link("../../../../../utils/client",{APIClient(t){c=t}},6);const g=50;n.visitorNavigation.helpers({loadingNavigation:()=>n.instance().isLoading.get(),pages(){const t=l.findOne({_id:this.rid},{fields:{"v.token":1}});if(t)return n.instance().pages.get()},onTableScroll(){const t=n.instance();return function(i){if(i.offsetHeight+i.scrollTop>=i.scrollHeight-100)return t.limit.set(t.limit.get()+50)}},pageTitle(){return this.navigation.page.title||r("Empty_title")},accessDateTime(){return o(this.ts).format("L LTS")}}),n.visitorNavigation.events({"scroll .visitor-scroll":a.throttle((function(t,i){if(t.target.scrollTop>=t.target.scrollHeight-t.target.clientHeight){const t=i.pages.get();if(i.total.get()<=t.length)return;return i.offset.set(i.offset.get()+50)}}),200)}),n.visitorNavigation.onCreated((async function(){const t=n.currentData();this.isLoading=new s(!0),this.pages=new s([]),this.offset=new s(0),this.ready=new s(!0),this.total=new s(0),this.autorun(async()=>{this.isLoading.set(!0);const i=this.offset.get();if(t&&t.rid){const{pages:e,total:s}=await c.v1.get("livechat/visitors.pagesVisited/".concat(t.rid,"?count=").concat(50,"&offset=").concat(i));this.isLoading.set(!1),this.total.set(s),this.pages.set(this.pages.get().concat(e))}this.isLoading.set(!1)})}))}

