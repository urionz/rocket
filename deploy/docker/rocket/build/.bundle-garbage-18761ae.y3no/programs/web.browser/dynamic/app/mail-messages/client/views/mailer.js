function module(e,r,n){let i,l,t,a,s,m,o,d;n.link("meteor/meteor",{Meteor(e){i=e}},0),n.link("meteor/templating",{Template(e){l=e}},1),n.link("meteor/tracker",{Tracker(e){t=e}},2),n.link("meteor/rocketchat:tap-i18n",{TAPi18n(e){a=e}},3),n.link("toastr",{default(e){s=e}},4),n.link("../../../settings",{settings(e){m=e}},5),n.link("../../../utils",{handleError(e){o=e}},6),n.link("../../../ui-utils/client",{SideNav(e){d=e}},7),l.mailer.helpers({fromEmail:()=>m.get("From_Email")}),l.mailer.events({"click .send"(e,r){e.preventDefault();const n=$(r.find("[name=from]")).val(),l=$(r.find("[name=subject]")).val(),t=$(r.find("[name=body]")).val(),m=$(r.find("[name=dryrun]:checked")).val(),d=$(r.find("[name=query]")).val();if(n){if(-1!==t.indexOf("[unsubscribe]"))return i.call("Mailer.sendMail",n,l,t,m,d,(function(e){return e?o(e):s.success(a.__("The_emails_are_being_sent"))}));s.error(a.__("error-missing-unsubscribe-link"))}else s.error(a.__("error-invalid-from-address"))}}),l.mailer.onRendered(()=>{t.afterFlush(()=>{d.setFlex("adminFlex"),d.openFlex()})})}

