function module(e,t,a){let i,n,r,o,c,l,s,u,p,d,m,h,_;a.link("meteor/meteor",{Meteor(e){i=e}},0),a.link("meteor/reactive-var",{ReactiveVar(e){n=e}},1),a.link("meteor/kadira:flow-router",{FlowRouter(e){r=e}},2),a.link("meteor/templating",{Template(e){o=e}},3),a.link("meteor/rocketchat:tap-i18n",{TAPi18n(e){c=e}},4),a.link("meteor/tracker",{Tracker(e){l=e}},5),a.link("toastr",{default(e){s=e}},6),a.link("../../../../authorization",{hasAllPermission(e){u=e}},7),a.link("../../../../ui-utils/client",{modal(e){p=e},SideNav(e){d=e}},8),a.link("../../../../utils",{t(e){m=e},handleError(e){h=e}},9),a.link("../../../../utils/client",{APIClient(e){_=e}},10),o.oauthApp.onCreated((async function(){const e=this.data.params();if(this.oauthApp=new n({}),this.record=new n({active:!0}),e&&e.id){const{oauthApp:t}=await _.v1.get("oauth-apps.get?appId=".concat(e.id));this.oauthApp.set(t)}})),o.oauthApp.helpers({hasPermission:()=>u("manage-oauth-apps"),data(){const e=o.instance();if("function"==typeof e.data.params){const t=e.data.params();if(t&&t.id){const e=o.instance().oauthApp.get();if(e)return e.authorization_url=i.absoluteUrl("oauth/authorize"),e.access_token_url=i.absoluteUrl("oauth/token"),Array.isArray(e.redirectUri)&&(e.redirectUri=e.redirectUri.join("\n")),o.instance().record.set(e),e}}return o.instance().record.curValue}}),o.oauthApp.events({"click .submit > .delete"(){const e=o.instance().data.params();p.open({title:m("Are_you_sure"),text:m("You_will_not_be_able_to_recover"),type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:m("Yes_delete_it"),cancelButtonText:m("Cancel"),closeOnConfirm:!1,html:!1},(function(){i.call("deleteOAuthApp",e.id,(function(){p.open({title:m("Deleted"),text:m("Your_entry_has_been_deleted"),type:"success",timer:1e3,showConfirmButton:!1}),r.go("admin-oauth-apps")}))}))},"click .submit > .save"(){const e=o.instance(),t=$("[name=name]").val().trim(),a="1"===$("[name=active]:checked").val().trim(),n=$("[name=redirectUri]").val().trim();if(""===t)return s.error(c.__("The_application_name_is_required"));if(""===n)return s.error(c.__("The_redirectUri_is_required"));const l={name:t,active:a,redirectUri:n};if("function"==typeof e.data.params){const t=e.data.params();if(t&&t.id)return i.call("updateOAuthApp",t.id,l,(function(e){if(null!=e)return h(e);s.success(c.__("Application_updated"))}))}i.call("addOAuthApp",l,(function(e,t){if(null!=e)return h(e);s.success(c.__("Application_added")),r.go("admin-oauth-app",{id:t._id})}))}}),o.oauthApp.onRendered(()=>{l.afterFlush(()=>{d.setFlex("adminFlex"),d.openFlex()})})}

