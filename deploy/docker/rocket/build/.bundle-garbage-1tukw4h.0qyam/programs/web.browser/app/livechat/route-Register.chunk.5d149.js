(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"/9tl":function(e,t,r){"use strict";(function(e,n){r.d(t,"a",function(){return O});var a=r("gDde"),i=r("co3k"),o=r("z4Qk"),l=r("qoM+"),u=r("jdJj"),s=r("PyG4"),c=r("qYlV"),d=r.n(c);function p(){return(p=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;arguments.length>t;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=e.t("Need help?"),g=e.t("Please, tell us some information to start the chat"),y=n(u.b.Footer,null),O=function(t){var r,a;function c(e){var r;v(f(r=t.call(this,e)||this),"state",{name:null,email:null,department:null}),v(f(r),"validations",{name:[l.e.nonEmpty],email:[l.e.nonEmpty,l.e.email],department:[]}),v(f(r),"getValidableFields",function(){return Object.keys(r.validations).map(function(e){return r.state[e]?h({fieldName:e},r.state[e]):null}).filter(Boolean)}),v(f(r),"validate",function(e,t){return r.validations[e].reduce(function(e,r){return e||r(t)},void 0)}),v(f(r),"validateAll",function(){var e=r.getValidableFields(),t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var a,i;if(t){if(n>=e.length)break;i=e[n++]}else{if((n=e.next()).done)break;i=n.value}var o=i.fieldName,l=i.value,u=r.validate(o,l);r.setState(((a={})[o]=h({},r.state[o],{value:l,error:u,showError:!1}),a))}}),v(f(r),"isValid",function(){return r.getValidableFields().every(function(e){return!(void 0===e?{}:e).error})}),v(f(r),"handleFieldChange",function(e){return function(t){var n,a=t.target.value,i=r.validate(e,a);r.setState(((n={})[e]=h({},r.state[e],{value:a,error:i,showError:!1}),n))}}),v(f(r),"handleNameChange",r.handleFieldChange("name")),v(f(r),"handleEmailChange",r.handleFieldChange("email")),v(f(r),"handleDepartmentChange",r.handleFieldChange("department")),v(f(r),"handleSubmit",function(e){if(e.preventDefault(),r.props.onSubmit){var t=Object.entries(r.state).filter(function(e){return null!==e[1]}).map(function(e){var t;return(t={})[e[0]]=e[1].value,t}).reduce(function(e,t){return h({},e,{},t)},{});r.props.onSubmit(t)}});var n=e.hasEmailField,a=e.hasDepartmentField,i=e.departments;return e.hasNameField&&(r.state.name={value:""}),n&&(r.state.email={value:""}),a&&i&&(r.state.department=i.length>1?{value:""}:1===i.length?{value:i[0]._id}:null),r.validateAll(),r}a=t,(r=c).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a;var m=c.prototype;return m.componentWillReceiveProps=function(e){var t=e.hasNameField,r=e.hasEmailField,n=e.hasDepartmentField,a=e.departmentDefault,i=e.departments,o=e.emailDefault,l=e.nameDefault||"";!t||this.state.name&&this.state.name===l?t||this.setState({name:null}):this.setState({name:h({},this.state.name,{value:l})});var u=o||"";!r||this.state.email&&this.state.name===u?r||this.setState({email:null}):this.setState({email:h({},this.state.email,{value:u})});var s=a||i&&1===i.length&&i[0]._id||"",c=n&&i&&i.length>1;!c||this.state.department&&this.state.department===s?c||this.setState({department:null}):this.setState({department:h({},this.state.department,{value:s})}),this.validateAll()},m.render=function(t,r){var a=r.name,c=r.email,m=r.department,h=t.title,f=t.color,v=t.message,O=t.loading,j=t.departments,w=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;i.length>n;n++)0>t.indexOf(r=i[n])&&(a[r]=e[r]);return a}(t,["title","color","message","loading","departments"]),D=this.isValid();return n(u.b,p({color:f,title:h||b,className:Object(s.d)(d.a,"register")},w),n(u.b.Content,null,n("p",{className:Object(s.d)(d.a,"register__message")},v||g),n(l.a,{onSubmit:this.handleSubmit},a?n(l.b,{required:!0,label:e.t("Name"),error:a.showError&&a.error},n(l.d,{name:"name",value:a.value,placeholder:e.t("Insert your name here..."),disabled:O,onInput:this.handleNameChange})):null,c?n(l.b,{required:!0,label:e.t("Email"),error:c.showError&&c.error},n(l.d,{name:"email",value:c.value,placeholder:e.t("Insert your email here..."),disabled:O,onInput:this.handleEmailChange})):null,m?n(l.b,{label:e.t("I need help with..."),error:m.showError&&m.error},n(l.c,{name:"department",value:m.value,options:Object(s.l)(j,"name").map(function(e){return{value:e._id,label:e.name}}),placeholder:e.t("Choose an option..."),disabled:O,onInput:this.handleDepartmentChange})):null,n(o.a,null,n(i.a,{submit:!0,loading:O,disabled:!D||O,stack:!0},e.t("Start chat"))))),y)},c}(a.Component)}).call(this,r("fsQa").default,r("gDde").h)},B2hK:function(e,t,r){"use strict";r.r(t);var n=r("/9tl");r.d(t,"Register",function(){return n.a});var a=r("gjNO");r.d(t,"RegisterContainer",function(){return a.b}),r.d(t,"RegisterConnector",function(){return a.a}),r.d(t,"default",function(){return a.c})},gjNO:function(e,t,r){"use strict";(function(e){r.d(t,"b",function(){return h}),r.d(t,"a",function(){return f});var n=r("gDde"),a=r("Y3FI"),i=r("qPgm"),o=r("vBLd"),l=r("UEyv"),u=r("kQFM"),s=r("/9tl");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(){return(d=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(t){var r,n;function u(){for(var r,n=arguments.length,a=new Array(n),u=0;n>u;u++)a[u]=arguments[u];return m(p(r=t.call.apply(t,[this].concat(a))||this),"getDepartment",function(e){void 0===e&&(e={});var t=e.department;if(""===t){var n=r.props.departments,a=(void 0===n?{}:n).filter(function(e){return e.showOnRegistration})[0];a&&(t=a._id)}return t}),m(p(r),"handleSubmit",function(e){return new Promise(function(t,n){var a,u,s,p,h=function(e){return function(t){try{return Promise.resolve(u({loading:!1})).then(function(){try{return e&&e.call(this,t)}catch(e){return n(e)}}.bind(this),n)}catch(e){return n(e)}}.bind(this)}.bind(this);return u=(a=r.props).dispatch,s=a.token,p=r.getDepartment(e),d(e,{department:p}),Promise.resolve(u({loading:!0,department:p})).then(function(){try{var r=function(){try{return t()}catch(e){return n(e)}},a=function(e){try{throw e}catch(e){return h(n)(e)}};try{return Promise.resolve(i.a.grantVisitor({visitor:function(e){for(var t=1;arguments.length>t;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{token:s})})).then(function(){try{return Object(o.a)("callback",["pre-chat-form-submit",e]),Promise.resolve(Object(l.a)()).then(function(){try{return h(r)()}catch(e){return a(e)}},a)}catch(e){return a(e)}},a)}catch(e){a(e)}}catch(e){return n(e)}},n)})}),m(p(r),"render",function(t){return e(s.a,d({},t,{onSubmit:r.handleSubmit,departmentDefault:r.getDepartmentDefault()}))}),r}n=t,(r=u).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n;var h=u.prototype;return h.getDepartmentDefault=function(){var e=this.props,t=e.guestDepartment,r=e.departments;if(r&&r.some(function(e){return e._id===t}))return t},h.componentDidUpdate=function(e){var t=this.props.user;!e.user&&t&&t._id&&Object(a.b)("/")},u}(n.Component),f=function(t){var r=t.ref,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;i.length>n;n++)0>t.indexOf(r=i[n])&&(a[r]=e[r]);return a}(t,["ref"]);return e(u.a,null,function(t){var a=t.config,i=(a=void 0===a?{}:a).departments,o=void 0===i?{}:i,l=a.messages;l=void 0===l?{}:l;var u=a.settings;u=void 0===u?{}:u;var s=a.theme;s=void 0===s?{}:s;var c=t.iframe,p=(c=void 0===c?{}:c).guest,m=(p=void 0===p?{}:p).department,f=p.name,v=p.email,b=c.theme;b=void 0===b?{}:b;var g=t.loading,y=void 0!==g&&g,O=t.token,j=t.dispatch,w=t.user;return e(h,d({ref:r},n,{theme:{color:b.color||s.color,fontColor:b.fontColor,iconColor:b.iconColor},title:s.title,message:l.registrationFormMessage,hasNameField:u.nameFieldRegistrationForm,hasEmailField:u.emailFieldRegistrationForm,hasDepartmentField:o&&o.some(function(e){return e.showOnRegistration}),departments:o.filter(function(e){return e.showOnRegistration}),nameDefault:f,emailDefault:v,guestDepartment:m,loading:y,token:O,dispatch:j,user:w}))})};t.c=f}).call(this,r("gDde").h)}}]);