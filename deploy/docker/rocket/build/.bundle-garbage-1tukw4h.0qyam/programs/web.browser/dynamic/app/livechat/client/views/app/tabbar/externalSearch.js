function module(e,t,s){let a,n,o;s.link("meteor/templating",{Template(e){a=e}},0),s.link("meteor/reactive-var",{ReactiveVar(e){n=e}},1),s.link("./externalSearch.html"),s.link("../../../../../utils/client",{APIClient(e){o=e}},2);const i=50;a.externalSearch.helpers({messages:()=>a.instance().externalMessages.get(),hasMore(){const e=a.instance(),t=e.externalMessages.get();return e.total.get()>t.length}}),a.externalSearch.events({"click button.pick-message"(e,t){e.preventDefault(),$("#chat-window-".concat(t.roomId," .js-input-message")).val(this.msg).focus()},"click .load-more"(e,t){e.preventDefault(),e.stopPropagation(),t.offset.set(t.offset.get()+50)},"click .load-more-livechat-external-messages":(e,t)=>t.offset.set(t.offset.get()+50)}),a.externalSearch.onCreated((function(){this.roomId=null,this.externalMessages=new n([]),this.offset=new n(0),this.ready=new n(!0),this.total=new n(0),this.autorun(async()=>{this.ready.set(!1);const e=this.offset.get();if(this.roomId=a.currentData().rid,this.roomId){const{messages:t,total:s}=await o.v1.get("livechat/messages.external/".concat(this.roomId,"?count=").concat(50,"&offset=").concat(e));this.total.set(s),0===e?this.externalMessages.set(t):this.externalMessages.set(this.externalMessages.get().concat(t))}this.ready.set(!0)})}))}

