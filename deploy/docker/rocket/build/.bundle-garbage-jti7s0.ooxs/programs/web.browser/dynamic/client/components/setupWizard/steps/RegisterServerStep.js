function module(e,t,r){let a,n,l,i,c,s,o,d,_,u,S,m,g,p,v,k,h,E,R,b,f,x;r.link("@babel/runtime/helpers/extends",{default(e){a=e}},0),r.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},1),r.export({RegisterServerStep:()=>w}),r.link("@rocket.chat/fuselage",{Box(e){l=e},CheckBox(e){i=e},Field(e){c=e},Margins(e){s=e},RadioButton(e){o=e}},0),r.link("@rocket.chat/fuselage-hooks",{useMergedRefs(e){d=e},useUniqueId(e){_=e}},1),r.link("react",{default(e){u=e},useRef(e){S=e},useState(e){m=e}},2),r.link("../../../contexts/ServerContext",{useMethod(e){g=e}},3),r.link("../../../contexts/SettingsContext",{useBatchSettingsDispatch(e){p=e}},4),r.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){v=e}},5),r.link("../../../contexts/TranslationContext",{useTranslation(e){k=e}},6),r.link("../../../hooks/useFocus",{useFocus(e){h=e}},7),r.link("../../basic/Icon",{Icon(e){E=e}},8),r.link("../Pager",{Pager(e){R=e}},9),r.link("../SetupWizardState",{useSetupWizardContext(e){b=e}},10),r.link("../Step",{Step(e){f=e}},11),r.link("../StepHeader",{StepHeader(e){x=e}},12),r.link("./RegisterServerStep.css");const C=u.forwardRef((e,t)=>{let{children:r,label:l,selected:i,disabled:s}=e,m=n(e,["children","label","selected","disabled"]);const g=S(),p=d(t,g),v=_();return u.createElement("span",{className:["SetupWizard__RegisterServerStep-option",i&&"SetupWizard__RegisterServerStep-option--selected",s&&"SetupWizard__RegisterServerStep-option--disabled"].filter(Boolean).join(" "),onClick:()=>{g.current.click()}},u.createElement(c,null,u.createElement(c.Row,null,u.createElement(o,a({ref:p,id:v,checked:i,disabled:s},m)),u.createElement(c.Label,{htmlFor:v},l))),r)}),T=e=>u.createElement("ul",a({className:"SetupWizard__RegisterServerStep-items"},e)),W=e=>{let{children:t,icon:r}=e,l=n(e,["children","icon"]);return u.createElement("li",a({className:"SetupWizard__RegisterServerStep-item"},l),u.createElement(E,{block:"SetupWizard__RegisterServerStep-item-icon",icon:r}),t)};function w(e){let{step:t,title:r,active:a}=e;const{canDeclineServerRegistration:n,goToPreviousStep:o,goToFinalStep:d}=b(),[S,E]=m(!0),[w,z]=m(!0),[P,y]=m(!1),I=k(),[F,M]=m(!1),A=p(),N=g("cloud:registerWorkspace"),B=v(),L=()=>{o()},O=async e=>{e.preventDefault(),M(!0);try{if(S&&!P)throw new Object({error:"Register_Server_Terms_Alert"});await A([{_id:"Statistics_reporting",value:S},{_id:"Apps_Framework_enabled",value:S},{_id:"Register_Server",value:S},{_id:"Allow_Marketing_Emails",value:w},{_id:"Cloud_Service_Agree_PrivacyTerms",value:P}]),S&&await N(),M(!1),d()}catch(t){B({type:"error",message:t}),M(!1)}},q=h(a),D=_(),j=_();return u.createElement(f,{active:a,working:F,onSubmit:O},u.createElement(x,{number:t,title:r}),u.createElement(s,{blockEnd:"x32"},u.createElement(l,null,u.createElement("p",{className:"SetupWizard__RegisterServerStep-text"},I("Register_Server_Info")),u.createElement("div",{className:"SetupWizard__RegisterServerStep-content"},u.createElement(C,{ref:q,"data-qa":"register-server",label:I("Register_Server_Registered"),name:"registerServer",value:"true",selected:S,onChange:e=>{let{currentTarget:{checked:t}}=e;E(t),z(t)}},u.createElement(T,null,u.createElement(W,{icon:"check"},I("Register_Server_Registered_Push_Notifications")),u.createElement(W,{icon:"check"},I("Register_Server_Registered_Livechat")),u.createElement(W,{icon:"check"},I("Register_Server_Registered_OAuth")),u.createElement(W,{icon:"check"},I("Register_Server_Registered_Marketplace"))),u.createElement(c,null,u.createElement(c.Row,null,u.createElement(i,{id:j,name:"optInMarketingEmails",value:"true",disabled:!S,checked:w,onChange:e=>{let{currentTarget:{checked:t}}=e;z(t)}}),u.createElement(c.Label,{htmlFor:j},I("Register_Server_Opt_In")))),u.createElement(c.Label,{text:I("Register_Server_Opt_In"),position:"end",className:"SetupWizard__RegisterServerStep__optIn"})),u.createElement(C,{"data-qa":"register-server-standalone",label:I("Register_Server_Standalone"),name:"registerServer",value:"false",disabled:!n,selected:!S,onChange:e=>{let{currentTarget:{checked:t}}=e;E(!t),z(!t),y(!t)}},u.createElement(T,null,u.createElement(W,{icon:"circle"},I("Register_Server_Standalone_Service_Providers")),u.createElement(W,{icon:"circle"},I("Register_Server_Standalone_Update_Settings")),u.createElement(W,{icon:"circle"},I("Register_Server_Standalone_Own_Certificates")))),u.createElement(s,{all:"x16"},u.createElement(c,null,u.createElement(c.Row,null,u.createElement(i,{id:D,name:"agreeTermsAndPrivacy","data-qa":"agree-terms-and-privacy",disabled:!S,checked:P,onChange:e=>{let{currentTarget:{checked:t}}=e;y(t)}}),u.createElement(c.Label,{htmlFor:D},I("Register_Server_Registered_I_Agree")," ",u.createElement("a",{href:"https://rocket.chat/terms"},I("Terms"))," & ",u.createElement("a",{href:"https://rocket.chat/privacy"},I("Privacy_Policy"))))))))),u.createElement(R,{disabled:F,onBackClick:L}))}}

