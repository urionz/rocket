function module(t,n,e){var r,i,o,a,c,s,p,u,l,f,d,m,g;e.link("meteor/tracker",{Tracker:function(t){r=t}},0),e.link("meteor/kadira:flow-router",{FlowRouter:function(t){i=t}},1),e.link("meteor/templating",{Template:function(t){o=t}},2),e.link("meteor/reactive-var",{ReactiveVar:function(t){a=t}},3),e.link("toastr",{default:function(t){c=t}},4),e.link("../../../utils",{t:function(t){s=t},APIClient:function(t){p=t}},5),e.link("../../../ui-utils/client",{SideNav:function(t){u=t}},6),e.link("../../lib/ImporterProgressStep",{ImportWaitingStates:function(t){l=t},ImportFileReadyStates:function(t){f=t},ImportPreparingStartedStates:function(t){d=t},ImportingStartedStates:function(t){m=t},ProgressStep:function(t){g=t}},7),e.link("./adminImport.html"),e.link("./importOperationSummary.js"),o.adminImport.helpers({isPreparing:function(){return o.instance().preparing.get()},history:function(){return o.instance().history.get()},operation:function(){return o.instance().operation.get()},isNotCurrentOperation:function(){var t=o.instance().operation.get();return!t||(t._id!==this._id||!t.valid)},canShowCurrentOperation:function(){var t=o.instance().operation.get();return t&&t.valid},canContinueOperation:function(){var t=o.instance().operation.get(),n;return!(!t||!t.valid)&&[g.USER_SELECTION].concat(l).concat(f).concat(d).includes(t.status)},canCheckOperationProgress:function(){var t=o.instance().operation.get();return!(!t||!t.valid)&&m.includes(t.status)},anySuccessfulSlackImports:function(){var t=o.instance().history.get();if(!t)return!1;for(var n=t,e=Array.isArray(n),r=0,n=e?n:n[Symbol.iterator]();;){var i;if(e){if(r>=n.length)break;i=n[r++]}else{if((r=n.next()).done)break;i=r.value}var a=i;if("slack"===a.importerKey&&a.status===g.DONE)return!0}return!1}}),o.adminImport.events({"click .new-import-btn":function(){i.go("/admin/import/new")},"click .download-slack-files-btn":function(t,n){n.preparing.set(!0),p.post("v1/downloadPendingFiles").then((function(t){n.preparing.set(!1),t.count?(c.success(s("File_Downloads_Started")),i.go("/admin/import/progress")):c.success(s("No_files_left_to_download"))})).catch((function(t){n.preparing.set(!1),t&&(console.error(t),c.error(s("Failed_To_Download_Files")))}))},"click .prepare-btn":function(){i.go("/admin/import/prepare")},"click .progress-btn":function(){i.go("/admin/import/progress")}}),o.adminImport.onCreated((function(){var t=this;this.preparing=new a(!0),this.history=new a([]),this.operation=new a(!1),p.get("v1/getCurrentImportOperation").then((function(n){t.operation.set(n.operation),p.get("v1/getLatestImportOperations").then((function(n){t.history.set(n),t.preparing.set(!1)})).catch((function(n){n&&(c.error(s("Failed_To_Load_Import_History")),t.preparing.set(!1))}))})).catch((function(n){n&&(c.error(s("Failed_To_Load_Import_Operation")),t.preparing.set(!1))}))})),o.adminImport.onRendered((function(){r.afterFlush((function(){u.setFlex("adminFlex"),u.openFlex()}))}))}

