function module(t,e,a){var n,i,r,s,o,c,l,v,u,g,m,f,p;a.link("@babel/runtime/regenerator",{default:function(t){n=t}},0),a.link("meteor/meteor",{Meteor:function(t){i=t}},0),a.link("meteor/reactive-var",{ReactiveVar:function(t){r=t}},1),a.link("meteor/tracker",{Tracker:function(t){s=t}},2),a.link("meteor/templating",{Template:function(t){o=t}},3),a.link("moment",{default:function(t){c=t}},4),a.link("../../../../../utils",{handleError:function(t){l=t}},5),a.link("../../../../../ui-utils",{popover:function(t){v=t}},6),a.link("../../../lib/chartHandler",{drawLineChart:function(t){u=t}},7),a.link("../../../lib/dateHandler",{setDateRange:function(t){g=t},updateDateRange:function(t){m=t}},8),a.link("./livechatAnalytics.html");var h=function(){return[{name:"Conversations",value:"conversations",chartOptions:[{name:"Total_conversations",value:"total-conversations"},{name:"Avg_chat_duration",value:"avg-chat-duration"},{name:"Total_messages",value:"total-messages"}]},{name:"Productivity",value:"productivity",chartOptions:[{name:"Avg_first_response_time",value:"avg-first-response-time"},{name:"Best_first_response_time",value:"best_first_response_time"},{name:"Avg_response_time",value:"avg-response-time"},{name:"Avg_reaction_time",value:"avg-reaction-time"}]}]},d=function(t,e){for(var a=[];t.length;){var n=Math.ceil(t.length/e--),i=t.slice(0,n);a.push(i),t=t.slice(n)}return a},_=function(){var t={daterange:{from:c(f.daterange.get().from,"MMM D YYYY").toISOString(),to:c(f.daterange.get().to,"MMM D YYYY").toISOString()},chartOptions:f.chartOptions.get()};i.call("livechat:getAnalyticsChartData",t,function(){function t(t,e){return n.async(function(){function a(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=2;break}return a.abrupt("return",l(t));case 2:return e&&e.chartLabel&&e.dataLabels&&e.dataPoints||console.log("livechat:getAnalyticsChartData => Missing Data"),a.next=5,n.awrap(u(document.getElementById("lc-analytics-chart"),p,[e.chartLabel],e.dataLabels,[e.dataPoints]));case 5:p=a.sent;case 6:case"end":return a.stop()}}return a}())}return t}()),i.call("livechat:getAgentOverviewData",t,(function(t,e){if(t)return l(t);e||console.log("livechat:getAgentOverviewData => Missing Data"),f.agentOverviewData.set(e)}))},O=function(){var t={daterange:{from:c(f.daterange.get().from,"MMM D YYYY").toISOString(),to:c(f.daterange.get().to,"MMM D YYYY").toISOString()},analyticsOptions:f.analyticsOptions.get()};i.call("livechat:getAnalyticsOverviewData",t,(function(t,e){if(t)return l(t);e||console.log("livechat:getAnalyticsOverviewData => Missing Data"),f.analyticsOverviewData.set(d(e,3))}))};o.livechatAnalytics.helpers({analyticsOverviewData:function(){return f.analyticsOverviewData.get()},agentOverviewData:function(){return f.agentOverviewData.get()},analyticsAllOptions:function(){return[{name:"Conversations",value:"conversations",chartOptions:[{name:"Total_conversations",value:"total-conversations"},{name:"Avg_chat_duration",value:"avg-chat-duration"},{name:"Total_messages",value:"total-messages"}]},{name:"Productivity",value:"productivity",chartOptions:[{name:"Avg_first_response_time",value:"avg-first-response-time"},{name:"Best_first_response_time",value:"best_first_response_time"},{name:"Avg_response_time",value:"avg-response-time"},{name:"Avg_reaction_time",value:"avg-reaction-time"}]}]},analyticsOptions:function(){return f.analyticsOptions.get()},daterange:function(){return f.daterange.get()},selected:function(t){return(t===f.analyticsOptions.get().value||t===f.chartOptions.get().value)&&"selected"},showLeftNavButton:function(){return"custom"!==f.daterange.get().value},showRightNavButton:function(){return"custom"!==f.daterange.get().value&&"today"!==f.daterange.get().value&&"this-week"!==f.daterange.get().value&&"this-month"!==f.daterange.get().value}}),o.livechatAnalytics.onCreated((function(){f=o.instance(),this.analyticsOverviewData=new r,this.agentOverviewData=new r,this.daterange=new r({}),this.analyticsOptions=new r({name:"Conversations",value:"conversations",chartOptions:[{name:"Total_conversations",value:"total-conversations"},{name:"Avg_chat_duration",value:"avg-chat-duration"},{name:"Total_messages",value:"total-messages"}]}),this.chartOptions=new r({name:"Total_conversations",value:"total-conversations"}),this.autorun((function(){f.daterange.set(g())}))})),o.livechatAnalytics.onRendered((function(){s.autorun((function(){f.daterange.get()&&f.analyticsOptions.get()&&f.chartOptions.get()&&(O(),_())}))})),o.livechatAnalytics.events({"click .lc-date-picker-btn":function(t){t.preventDefault();var e=[],a={template:"livechatAnalyticsDaterange",currentTarget:t.currentTarget,data:{options:e,daterange:f.daterange},offsetVertical:t.currentTarget.clientHeight+10};v.open(a)},"click .lc-daterange-prev":function(t){t.preventDefault(),f.daterange.set(m(f.daterange.get(),-1))},"click .lc-daterange-next":function(t){t.preventDefault(),f.daterange.set(m(f.daterange.get(),1))},"change #lc-analytics-options":function(t){t.preventDefault(),f.analyticsOptions.set([{name:"Conversations",value:"conversations",chartOptions:[{name:"Total_conversations",value:"total-conversations"},{name:"Avg_chat_duration",value:"avg-chat-duration"},{name:"Total_messages",value:"total-messages"}]},{name:"Productivity",value:"productivity",chartOptions:[{name:"Avg_first_response_time",value:"avg-first-response-time"},{name:"Best_first_response_time",value:"best_first_response_time"},{name:"Avg_response_time",value:"avg-response-time"},{name:"Avg_reaction_time",value:"avg-reaction-time"}]}].filter((function(e){return e.value===t.currentTarget.value}))[0]),f.chartOptions.set(f.analyticsOptions.get().chartOptions[0])},"change #lc-analytics-chart-options":function(t){t.preventDefault(),f.chartOptions.set(f.analyticsOptions.get().chartOptions.filter((function(e){return e.value===t.currentTarget.value}))[0])}})}

